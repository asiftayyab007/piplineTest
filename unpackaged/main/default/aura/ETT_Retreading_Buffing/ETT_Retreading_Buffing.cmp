<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome" access="global" controller="ETT_JobCardListController">
    <aura:attribute name="recordId" type="String"/>
    <aura:attribute name="workStationSchedule" type="ETT_Work_Schedule__c"/>
    <aura:attribute name="skillSets" type="ETT_Skill_Set__c[]"/>
    <aura:attribute name="stationWrapperTools" type="ETT_JobCardListController.ToolsAndUsageWrapper[]"/> 
    <aura:attribute name="toolsListOptions" type="List"/>
    <aura:attribute name="toolUsageListOptions" type="List"/>
    <aura:attribute name="bladeTools" type="List"/> 
    <aura:attribute name="intervalId" type="Integer" default="0"/>
    <aura:attribute name="sideBufferTools" type="List"/>
    <aura:attribute name="suctionPipelineTools" type="List"/>
    <aura:attribute name="suctionFilterTools" type="List"/>
    <aura:attribute name="dustCollectorReasonValues" type="Map"/>
    <aura:attribute name="buffingSettingsReasonValues" type="Map"/>  
    <aura:attribute name="buffingSettingsReasons" type="Map"/>
    <aura:attribute name="precuredTreadLineValues" type="Map"/>    
    <aura:attribute name="tyreMaster" type="ETT_Tyre_Master__c" />
    <aura:attribute name="treadMasterList" type="ETT_Tools_Allocation__c[]" />
    <aura:attribute name="treadMasterListValues" type="Map" />
    <aura:attribute name="sevenstageReasonValue" type="Map" />
    <aura:attribute name="usageSection" type="boolean"/>    
    <aura:attribute name="openToolsReqSection" type="boolean" default="false"/>    
    <aura:attribute name="toolsCheckFinal" type="Boolean" default="false"/>
    <aura:attribute name="showJobModelView" type="Boolean" default="false"/>
    <aura:attribute name="recordsFound" type="Boolean" default="false"/>    
    <aura:attribute name="isOnLoad" type="Boolean" default="true"/>    
    <aura:attribute name="fileToBeUploaded" type="Object[]"/>
    <aura:attribute name="jobCardSetup" type="ETT_Job_Card_Setup__mdt"/>
    <aura:attribute name="recordTypeIdOfStageName" type="Id"/>
    <aura:attribute name="step_error" type="String"/>
    <aura:attribute name="current_line" type="ETT_JobCardListController.JobLineItemWrapper"/>
    <aura:attribute name="current_sequence" type="Integer" default="0"/> 
    <aura:attribute name="showNoRecordsMessage" type="Boolean" default="false"/>
    <aura:attribute name="Nextlineitem" type="ETT_Job_Card_Line_Item__c"/>
    <aura:attribute name="nextWorkTracker" type="ETT_Work_Activity__c"/>
    <aura:attribute name="allowDML" type="Boolean" default="true"/>
    <aura:attribute name="isJobDisabled" type="boolean" default="true"/>
    <aura:attribute name="seq_8_initialState" type="String"/>
    <aura:attribute name="seq_8_lineId" type="String"/>    
    <aura:attribute name="seq_8_finalState" type="String"/>
    
    <aura:attribute name="startCheckbox" type="boolean"/>
    
    <aura:attribute name="goodNotGoodValues" type="Map"/>  
    <aura:attribute name="NotGoodAndGoodValues" type="Map"/>
    <aura:attribute name="highLowValues" type="Map"/>  
    <aura:attribute name="lowHighValues" type="Map"/>    
    <aura:attribute name="yesNoValues" type="Map"/>  
    <aura:attribute name="noYesValues" type="Map"/>    
    <aura:attribute name="matchedNotValues" type="Map"/>  
    <aura:attribute name="notMatchedValues" type="Map"/> 
    <aura:attribute name="sideBufferConditionReasons" type="Map"/>
    <aura:attribute name="correctNotcorrectValues" type="Map"/>
    <aura:attribute name="NotCorrectNotcorrectValues" type="Map"/>
    <aura:attribute name="options" type="List" />
    <aura:attribute name="value" type="List" default=""/>
    <aura:attribute name="WearRequiredPPT" type="boolean" default="false"/> 
    <aura:attribute name="newToolRequests" type="ETT_JobCardListController.toolWrapper[]"/>
    
    <aura:attribute name="tyreCutList" type="List"  default="[]"/>
    <aura:attribute name="tyreCrownInspection" type="ETT_Tyre_Rejection_Line_Item__c"/>
    <aura:attribute name="selectedCutsNTCList" type="List" default="[]" description="Selected Genre Picklist Values"/>    
    <aura:attribute name="selectedCutsNTC" type="List"  default="[]"/>
    <aura:attribute name="statusValues" type="Map"/>
    
    <aura:attribute name="isOnHold" type="boolean" default="false"/>
    <aura:attribute name="lineItemForHold" type="ETT_JobCardListController.JobLineItemWrapper"/>
    <aura:attribute name="holdReasonValues" type="Map"/>
    
    <aura:attribute name="confirmHoldVar" type="boolean"/>
    <aura:attribute name="availableStations" type="List"  default="[]"/>
    <aura:attribute name="selectedNextStation" type="String"/>
    
    <aura:attribute name="selectedLookUpRecord" type="sObject" default="{}"/>
    <aura:attribute name="toolsStockAndFactory" type="List"/>
    
    <!--Janardhan added-->
    <aura:attribute name="workSheduleInfo" type="Object"/>
    
    
    
    <!--all handlers-->
    <aura:handler name="init" value="{!this}" action="{!c.initAction}"/>
    <aura:registerEvent name="refreshJobCardList" type="c:ETT_JobCardUpdate" />
    <aura:handler name="ComplaintMasterEvent" event="c:ETT_ComplaintMaster" action="{!c.handleComplaintMasterEvent}"></aura:handler>
    
    <aura:if isTrue="{!v.showJobModelView}">
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal_medium" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1">
            <div class="slds-modal__container animated slideInUp" draggable="true">                
                <header class="slds-modal__header">
                    <h3 id="modal-heading-01" class="slds-text-heading_small slds-hyphenate">JOB CARD: {!v.current_line.relatedJobWrapper.validJobCardList[0].Name} <b>({!v.current_line.relatedJobWrapper.validJobCardList[0].ETT_Stages__c})</b></h3>
                    <lightning:buttonIcon iconName="utility:close"
                                          onclick="{! c.closeModal }"
                                          alternativeText="close"
                                          variant="bare-inverse"
                                          class="slds-modal__close"/>
                </header>
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                    <div class="main_section">
                        <aura:if isTrue="{!!empty(v.current_line.relatedJobWrapper.validJobCardList)}"> 
                            
                            <!--step-1-->
                            <aura:if isTrue="{!and(v.current_sequence eq 1,v.current_line.jobLineItem.Sequence__c eq 1)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Precautions, Work Station, Technician Skills &amp; Tools/Consumables Check'}">
                                            <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                            <a target="_blank" class="requiredskillsetlink" href="{!$Resource.ETT_Skiving_Required_Skill_Set}" title="Required Skill Set">Required Skill Set</a>
                                            <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                    <b>Error:&nbsp;</b>{!v.step_error}
                                                </div>
                                            </aura:if>
                                            <div class="slds-grid slds-wrap check_section">
                                                <p class="Station"><b>Station Code:&nbsp;</b>{!v.workStationSchedule.ETT_Work_Station__r.ETT_Station_Code__c}</p>
                                                <div class="slds-col">
                                                    <div class="slds-form-element ">
                                                        <div class="slds-form-element__control">                                                            
                                                            <div class="slds-checkbox">
                                                                <span></span> 
                                                                <abbr class="slds-required" title="required">*</abbr>
                                                                <input type="checkbox" name="options" id="WearRequiredPPT" value="WearRequiredPPT" aria-describedby="error_01" onclick="{!c.onPreRequisiteCheck}"/>
                                                                
                                                                <label class="slds-checkbox__label" for="WearRequiredPPT">
                                                                    <span class="slds-checkbox_faux"></span>
                                                                    <span class="slds-form-element__label">Wear Required PPT</span>
                                                                </label>
                                                            </div>
                                                        </div>
                                                        <div class="slds-form-element__help slds-hide" id="error_01">This field is required</div>
                                                    </div>
                                                    <img src="{!$Resource.Technician_Skill}" width="600" style="padding-left: 5%;"/>
                                                </div> 
                                                <div class="slds-col">
                                                    <div class="slds-grid slds-grid_vertical" >
                                                        <div class="nextcheck">
                                                            <aura:iteration items="{!v.options}" var="sf" indexVar="i">
                                                                <div class="slds-form-element Secondsec">
                                                                    <div class="slds-form-element__control">
                                                                        <div class="slds-checkbox">
                                                                            
                                                                            <abbr class="slds-required" title="required">*</abbr>
                                                                            <input value="{!i}" type="checkbox" name="options" id="{!sf.label}"  aria-describedby="error_01" onclick="{!c.onPreRequisiteCheck}"/>
                                                                            
                                                                            <label class="slds-checkbox__label" for="{!sf.label}">
                                                                                <span class="slds-checkbox_faux"></span>
                                                                                <span class="slds-form-element__label">{!sf.label}</span>
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                    <ol type="a">
                                                                        <aura:iteration items="{!sf.subitem}" var="item">
                                                                            <li>{!item.label}</li><br/>
                                                                        </aura:iteration>
                                                                    </ol>
                                                                    <div class="slds-form-element__help slds-hide" id="error_01">This field is required</div>
                                                                </div>
                                                            </aura:iteration>
                                                        </div>
                                                        
                                                    </div>
                                                </div>
                                            </div>                        
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if> 
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 2,v.current_line.jobLineItem.Sequence__c eq 2)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Check Floor Conditions'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>
                                                
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Initial Floor Condition</label>
                                                    <div>
                                                        <lightning:select value="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" name="FloorCheck" label="Initial Floor Conditions" variant="label-hidden"  disabled="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                            <aura:iteration items="{!v.goodNotGoodValues}" var="inv" indexVar="key">
                                                                <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" />
                                                            </aura:iteration>
                                                        </lightning:select>
                                                    </div>
                                                </div>
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Final Floor Condition</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.ETT_Final_Activity_State__c}" name="FloorCheck" label="Final Floor Conditions" variant="label-hidden">
                                                                <aura:iteration items="{!v.NotGoodAndGoodValues}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Final_Activity_State__c}" />
                                                                </aura:iteration>
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                </aura:if>
                                            </div>  
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if--> 
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 3,v.current_line.jobLineItem.Sequence__c eq 3)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Check Light Conditions'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>
                                                
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Initial Light Condition</label>
                                                    <div>
                                                        <lightning:select value="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" label="Initial Light Conditions" variant="label-hidden"  disabled="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                            <aura:iteration items="{!v.goodNotGoodValues}" var="inv" indexVar="key">
                                                                <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" />
                                                            </aura:iteration>
                                                        </lightning:select>
                                                    </div>
                                                </div>
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Final Light Condition</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.ETT_Final_Activity_State__c}" name="LightCheck" label="Final Light Conditions" variant="label-hidden">
                                                                <aura:iteration items="{!v.NotGoodAndGoodValues}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Final_Activity_State__c}" />
                                                                </aura:iteration>
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                </aura:if>
                                            </div>  
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if--> 
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 4,v.current_line.jobLineItem.Sequence__c eq 4)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Check Buffer Settings'}"> 
                                            
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>                                        
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Initial Buffer Settings Condition</label>
                                                    <div>
                                                        <lightning:select value="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" label="Initial Buffing Settings Conditions" variant="label-hidden" disabled="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                            <aura:iteration items="{!v.correctNotcorrectValues}" var="inv" indexVar="key">
                                                                <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" />
                                                            </aura:iteration>
                                                        </lightning:select>
                                                    </div>
                                                </div>
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c=='Not Correct'}">
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Reason</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.ETT_Incorrect_Buffing_Settings_Reason__c}" name="Reason for incorrect buffing setting" label="Reason" variant="label-hidden">
                                                                <aura:iteration items="{!v.buffingSettingsReasons}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Incorrect_Buffing_Settings_Reason__c}"/>
                                                                </aura:iteration>
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                    
                                                </aura:if>
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Final Buffer Settings</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.ETT_Final_Activity_State__c}" variant="label-hidden">
                                                                <aura:iteration items="{!v.NotCorrectNotcorrectValues}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Final_Activity_State__c}" />
                                                                </aura:iteration>
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                </aura:if>
                                            </div>  
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if-->
                            
                            
                            
                            
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 5,v.current_line.jobLineItem.Sequence__c eq 5)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Check Blade Conditions'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>                                        
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Initial Blade Condition</label>
                                                    <div>
                                                        <lightning:select value="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" label="Initial Blade Conditions" variant="label-hidden">
                                                            <aura:iteration items="{!v.goodNotGoodValues}" var="inv" indexVar="key">
                                                                <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" />
                                                            </aura:iteration>
                                                        </lightning:select>
                                                    </div>
                                                </div>
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c=='Not Good'}">
                                                    <div>
                                                        <b>Note:</b>&nbsp;Please raise new request if you find the blade is not good
                                                    </div>
                                                </aura:if>
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Tool_Material_Request_Raised__c}">
                                                    <br/><br/>
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Final Blade Condition</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.ETT_Final_Activity_State__c}" variant="label-hidden">
                                                                <aura:iteration items="{!v.NotGoodAndGoodValues}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Final_Activity_State__c}" />
                                                                </aura:iteration>
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                </aura:if>
                                            </div>  
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if-->
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 6,v.current_line.jobLineItem.Sequence__c eq 6)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Check Side Buffer Condition'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>                                        
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Initial Side buffer Condition</label>
                                                    <div>
                                                        <lightning:select value="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" label="Initial Blade Conditions" variant="label-hidden">
                                                            <aura:iteration items="{!v.goodNotGoodValues}" var="inv" indexVar="key">
                                                                <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" />
                                                            </aura:iteration>
                                                        </lightning:select>
                                                    </div>
                                                </div>
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c=='Not Good'}">
                                                    <div>
                                                        <b>Note:</b>&nbsp;Please raise new request if you find the tool is not good
                                                    </div>
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Reason</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.ETT_Side_Buffer_Condition_Reasons__c}" label="Reason" variant="label-hidden">
                                                                <aura:iteration items="{!v.sideBufferConditionReasons}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Side_Buffer_Condition_Reasons__c}" />
                                                                </aura:iteration>
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                </aura:if>
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Tool_Material_Request_Raised__c}">
                                                    <br/><br/>
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Final Side Buffer Condition</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.ETT_Final_Activity_State__c}" variant="label-hidden">
                                                                <aura:iteration items="{!v.NotGoodAndGoodValues}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Final_Activity_State__c}" />
                                                                </aura:iteration>
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                </aura:if>
                                            </div>  
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if-->
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 7,v.current_line.jobLineItem.Sequence__c eq 7)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Check Buffing Powder Replacement'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>
                                                
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Do you want to replace the buffing powder?</label>
                                                    <div>
                                                        <lightning:select value="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" variant="label-hidden" disabled="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                            <aura:iteration items="{!v.noYesValues}" var="inv" indexVar="key">
                                                                <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" />
                                                            </aura:iteration>
                                                        </lightning:select>
                                                    </div>
                                                </div>
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Yes'}">
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Reason Maintenance</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.Reason__c}" name="SevenstageReason" label="Reason Maintenance" variant="label-hidden">
                                                                <aura:iteration items="{!v.sevenstageReasonValue}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.Reason__c}"/>
                                                                </aura:iteration>
                                                            </lightning:select>
                                                            <aura:if isTrue="{!v.current_line.jobLineItem.Reason__c eq 'Others'}">
                                                                <div class="slds-form-element textboxdiv">
                                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Technician Remarks</label>
                                                                    <div>
                                                                        <lightning:textarea name="remarks" value="{!v.current_line.jobLineItem.ETT_Remarks__c}" label="" />
                                                                    </div>
                                                                </div>
                                                            </aura:if>
                                                        </div>
                                                    </div>
                                                </aura:if>
                                                
                                                
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Buffing powder replaced?</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.ETT_Final_Activity_State__c}" variant="label-hidden">
                                                                <aura:iteration items="{!v.noYesValues}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Final_Activity_State__c}" />
                                                                </aura:iteration>
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                </aura:if>
                                            </div>  
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if--> 
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 8,v.current_line.jobLineItem.Sequence__c eq 8)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Check Dust Collector Suction Status'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>
                                                
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Initial Dust Collector Suction Status</label>
                                                    <div>
                                                       <lightning:select value="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" variant="label-hidden" disabled="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">

                                                            <aura:iteration items="{!v.goodNotGoodValues}" var="inv" indexVar="key">
                                                                <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" />
                                                            </aura:iteration>
                                                        </lightning:select>
                                                    </div>
                                                </div>
                                                
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Not Good'}">
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Reason Maintenance</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.ETT_Dust_Collector_Reason__c}" name="DustCollectorReason" label="Reason Maintenance" variant="label-hidden">
                                                                <aura:iteration items="{!v.dustCollectorReasonValues}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Dust_Collector_Reason__c}"/>
                                                                </aura:iteration>
                                                            </lightning:select>
                                                            <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Dust_Collector_Reason__c eq 'Other reasons'}">
                                                                <div class="slds-form-element textboxdiv">
                                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Technician Remarks</label>
                                                                    <div>
                                                                        <lightning:textarea name="remarks" value="{!v.current_line.jobLineItem.ETT_Remarks__c}" label="" />
                                                                    </div>
                                                                </div>
                                                            </aura:if>
                                                        </div>
                                                    </div>
                                                     <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Final Dust Collector Suction Status</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.ETT_Final_Activity_State__c}" name="LightCheck" label="Final Light Conditions" variant="label-hidden" aura:id="finalActivityState" >
                                                                <aura:iteration items="{!v.NotGoodAndGoodValues}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Final_Activity_State__c}" />
                                                                </aura:iteration>
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                    
                                                </aura:if>
                                                </aura:if>
                                            
                                            </div>  
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if--> 
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 9,v.current_line.jobLineItem.Sequence__c eq 9)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Check Dust Collector Suction line'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Initial Suction line condition</label>
                                                    <div>
                                                        <lightning:select value="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" variant="label-hidden" disabled="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                            <aura:iteration items="{!v.goodNotGoodValues}" var="inv" indexVar="key">
                                                                <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Initial_Activity_State__c}"/>
                                                            </aura:iteration>
                                                        </lightning:select>
                                                    </div>
                                                </div>
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Final Suction line condition</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.ETT_Final_Activity_State__c}" variant="label-hidden">
                                                                <aura:iteration items="{!v.NotGoodAndGoodValues}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Final_Activity_State__c}" />
                                                                </aura:iteration>
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                </aura:if> 
                                            </div>
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if--> 
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 10,v.current_line.jobLineItem.Sequence__c eq 10)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Check Dust Collector Suction Pipeline'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Initial Suction Pipeline Value</label>
                                                    <div>
                                                        <lightning:select value="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" variant="label-hidden">
                                                            <aura:iteration items="{!v.highLowValues}" var="inv" indexVar="key">
                                                                <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Initial_Activity_State__c}"/>
                                                            </aura:iteration>
                                                        </lightning:select>
                                                    </div>
                                                </div>
                                                
                                                <aura:if isTrue="{!and(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Low')}">
                                                    <div>
                                                        <b>Note:</b>&nbsp;Please raise new request if you find the tool is not good
                                                    </div>
                                                </aura:if>
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Tool_Material_Request_Raised__c}">
                                                    <br/>
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Final Suction Pipeline Value</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.ETT_Final_Activity_State__c}" variant="label-hidden">
                                                                <aura:iteration items="{!v.lowHighValues}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Final_Activity_State__c}"/>
                                                                </aura:iteration>
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                </aura:if>
                                            </div>
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if-->
                            
                            <aura:if isTrue="{!and(v.current_sequence eq 11,v.current_line.jobLineItem.Sequence__c eq 11)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Check Dust Collector Suction Filter'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Initial Suction Filter Capacity</label>
                                                    <div>
                                                        <lightning:select value="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" variant="label-hidden">
                                                            <aura:iteration items="{!v.highLowValues}" var="inv" indexVar="key">
                                                                <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Initial_Activity_State__c}"/>
                                                            </aura:iteration>
                                                        </lightning:select>
                                                    </div>
                                                </div>
                                                
                                                <aura:if isTrue="{!and(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Low')}">
                                                    <div>
                                                        <b>Note:</b>&nbsp;Please raise new request if you find the tool is not good
                                                    </div>
                                                </aura:if>
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Tool_Material_Request_Raised__c}">
                                                    <br/>
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Final Suction Filter Value</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.ETT_Final_Activity_State__c}" variant="label-hidden">
                                                                <aura:iteration items="{!v.lowHighValues}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Final_Activity_State__c}"/>
                                                                </aura:iteration>
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                </aura:if>
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Final Dust Collection Status</label>
                                                    <div>
                                                        <lightning:select value="{!v.seq_8_finalState}" variant="label-hidden">
                                                            <aura:iteration items="{!v.NotGoodAndGoodValues}" var="inv" indexVar="key">
                                                                <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.seq_8_finalState}" />
                                                            </aura:iteration>
                                                        </lightning:select>
                                                    </div>
                                                </div>
                                            </div>
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if>
                            
                            <aura:if isTrue="{!and(v.current_sequence eq 2,v.current_line.jobLineItem.Sequence__c eq 2)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Check  Tyre Inflation Pressure'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Initial Tyre Inflation Pressure having 25-30 psi</label>
                                                    <div>
                                                        <lightning:select value="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" variant="label-hidden" disabled="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                            <aura:iteration items="{!v.yesNoValues}" var="inv" indexVar="key">
                                                                <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Initial_Activity_State__c}"/>
                                                            </aura:iteration>
                                                        </lightning:select> 
                                                    </div>
                                                </div>
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Final Tyre Inflation Pressure Condition(25-30 psi)</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.ETT_Final_Activity_State__c}" variant="label-hidden">
                                                                <aura:iteration items="{!v.NotGoodAndGoodValues}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Final_Activity_State__c}" />
                                                                </aura:iteration>
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                </aura:if> 
                                            </div>
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if> 
                            
                            <aura:if isTrue="{!and(v.current_sequence eq 3,v.current_line.jobLineItem.Sequence__c eq 3)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Check Rasp hub position Check'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Initial Rasp hub in non-contact position with tyre?</label>
                                                    <div>
                                                        <lightning:select value="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" variant="label-hidden" disabled="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                            <aura:iteration items="{!v.yesNoValues}" var="inv" indexVar="key">
                                                                <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Initial_Activity_State__c}"/>
                                                            </aura:iteration>
                                                        </lightning:select>
                                                    </div>
                                                </div>
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Final Resp hub in non-contact position with tyre?</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.ETT_Final_Activity_State__c}" variant="label-hidden">
                                                                <aura:iteration items="{!v.noYesValues}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Final_Activity_State__c}" />
                                                                </aura:iteration>
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                </aura:if> 
                                            </div>
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if> 
                            
                            <aura:if isTrue="{!and(v.current_sequence eq 4,v.current_line.jobLineItem.Sequence__c eq 4)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Check Stones Trapped on the tyre'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Check any stone trapped on the Tyre</label>
                                                    <div>
                                                        <lightning:select value="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" variant="label-hidden" disabled="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                            <aura:iteration items="{!v.yesNoValues}" var="inv" indexVar="key">
                                                                <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Initial_Activity_State__c}"/>
                                                            </aura:iteration>
                                                        </lightning:select>
                                                    </div>
                                                </div>
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Final Check any Stones Trapped on Tyre</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.ETT_Final_Activity_State__c}" variant="label-hidden">
                                                                <aura:iteration items="{!v.noYesValues}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Final_Activity_State__c}" />
                                                                </aura:iteration>
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                </aura:if> 
                                            </div>
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if> 
                            
                            <aura:if isTrue="{!and(v.current_sequence eq 5,v.current_line.jobLineItem.Sequence__c eq 5)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Other activities &amp; Job Card History'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Please confirm below activities</label>
                                                    <div>
                                                        <div class="slds-form-element tool_Secondsec">
                                                            <ul type="a">
                                                                <lightning:input type="checkbox" checked="{!v.current_line.relatedJobWrapper.validJobCardList[0].ETT_Buffing_Started_Dust_Collection__c}" label="Did you started dust collection system?"/>
                                                                <lightning:input type="checkbox" checked="{!v.current_line.relatedJobWrapper.validJobCardList[0].ETT_Buffing_On_Power_Switch__c}" label="Did you switched on power?"/>
                                                            </ul>
                                                        </div>
                                                         <label class="slds-form-element__label" for="default1">No. of Cuts</label>
                                                        <div class="slds-grid slds-gutters">
                                                        
                                                        <div class="slds-form-element__control slds-col slds-size_1-of-3">
                                                            <lightning:buttonIcon disabled=""  class="slds-button slds-button_icon slds-button_icon-small slds-input__button_decrement"  iconName="utility:ban" title="Decrement" onclick="{!c.handleOnDecrement}"/>
                                                            <input type="number" id="default1" placeholder="0" class="slds-input slds-input_counter" value="{!v.current_line.relatedJobWrapper.validJobCardList[0].Buffing_Cuts_Count__c}"/>
                                                            <lightning:buttonIcon  class="slds-button slds-button_icon slds-button_icon-small slds-input__button_increment"  iconName="utility:new" title="Increment" onclick="{!c.handleOnIncrement}"/>
                                                        </div>
                                                        </div>
                                                    </div>
                                                    <br/>
                                                    <c:ETT_JobCardStageHistoryReadOnly jobCardId="{!v.current_line.relatedJobWrapper.validJobCardList[0].Id}" 
                                                                                       inspectionCardId="{!v.current_line.relatedJobWrapper.validJobCardList[0].ETT_Inspection_Card__c}"
                                                                                       currentStageName="{!v.current_line.relatedJobWrapper.validJobCardList[0].ETT_Stages__c}"
                                                                                       currentRevisionNumber="{!v.current_line.jobLineItem.ETT_Revision_Number__c}"/>
                                                </div>
                                            </div>
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if>
                            
                         <!--   <aura:if isTrue="{!and(v.current_sequence eq 17,v.current_line.jobLineItem.Sequence__c eq 17)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Start Buffing'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Please read below instructions carefully:</label>
                                                    <div>
                                                        <ol class="slds-list_ordered" type="a">
                                                            <li>Excessive smoke and heat emitted indicates that either pressing the buffer too hard and/or buffing blades are already worn out. Release the buffing pressure or replace the buffing blade is necessary to avoid scorching to the rubber fire hazard.</li>
                                                            <li>All buffed radial tyre casings to be cemented with in 8 hours.</li>
                                                        </ol>
                                                        <ui:outputRichText class="slds-text-longform" value="{!v.jobCardSetup.ETT_Instructions__c}"/>                                                        
                                                        <div class="slds-form-element tool_Secondsec">
                                                            <ul type="a">
                                                                <lightning:input type="checkbox" checked="{!v.startCheckbox}" label="I ensure I read the details to proceed further."/>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if> -->
                            
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 6,v.current_line.jobLineItem.Sequence__c eq 6)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Inspection Findings'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>
                                                <div style="width:80%;margin:3px;">
                                                    <c:ETT_Technician_Inspection_Update_clone inspectionRecordId='{!v.current_line.relatedJobWrapper.validJobCardList[0].ETT_Inspection_Card__c}' jobCardId='{!v.recordId}' jobCardStage="{!v.current_line.relatedJobWrapper.validJobCardList[0].ETT_Stages__c}" revision="{!v.current_line.jobLineItem.ETT_Revision_Number__c}" />
                                                </div>
                                            </div>
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if--> 
                            
                            
                            <aura:if isTrue="{!and(v.current_sequence eq 6,v.current_line.jobLineItem.Sequence__c eq 6)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Tread Surface Scanning Process'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Tread Surface condition</label>
                                                    <div>
                                                        <lightning:select value="{!v.current_line.jobLineItem.ETT_Initial_Activity_State__c}" variant="label-hidden" disabled="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                            <aura:iteration items="{!v.matchedNotValues}" var="inv" indexVar="key">
                                                                <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Initial_Activity_State__c}"/>
                                                            </aura:iteration>
                                                        </lightning:select>
                                                    </div>
                                                </div>
                                                <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Status__c eq 'In-Progress'}">
                                                    <br/>
                                                    <div class="slds-form-element tool_Secondsec">
                                                        <ul type="a">
                                                            <lightning:input type="checkbox" checked="{!v.current_line.relatedJobWrapper.validJobCardList[0].ETT_Buffing_Check_buffing_template__c}" label="Choose right buffing template"/>
                                                        </ul>
                                                    </div>
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Choose Precured Tread line (in mm)</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.relatedJobWrapper.validJobCardList[0].ETT_Buffing_precured_tread_line__c}" name="" label="Choose Precured Tread line (in mm)" variant="label-hidden">
                                                                <aura:iteration items="{!v.precuredTreadLineValues}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.relatedJobWrapper.validJobCardList[0].ETT_Buffing_Ini_Surface_Scan_Condtiion__c}" />
                                                                </aura:iteration>
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Final Scan Surface Condition</label>
                                                        <div>
                                                            <lightning:select value="{!v.current_line.jobLineItem.ETT_Final_Activity_State__c}" variant="label-hidden">
                                                                <aura:iteration items="{!v.notMatchedValues}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.jobLineItem.ETT_Final_Activity_State__c}" />
                                                                </aura:iteration>
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                </aura:if> 
                                            </div>
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if> 
                            
                            <aura:if isTrue="{!and(v.current_sequence eq 7,v.current_line.jobLineItem.Sequence__c eq 7)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Side Crown buffing process'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>
                                                  <div class="slds-form-element textboxdiv slds-grid slds-gutters">
                                                    <div class="slds-col slds-size_1-of-2">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Actual Tread Pattern</label>
                                                        <lightning:input name="TreadMaster" value="{!v.current_line.relatedJobWrapper.validJobCardList[0].Tyre_Inventory__r.ETT_Pattern__r.Name}" disabled="true" variant="label-hidden" />
                                                        <!--lightning:select value="{!v.current_line.relatedJobWrapper.validJobCardList[0].ETT_Tread_Master_Allocation__c}" disabled="true" name="TreadMaster" label="Select Tread Master" variant="label-hidden">
                                                            <aura:iteration items="{!v.treadMasterListValues}" var="inv" indexVar="key">
                                                                <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.relatedJobWrapper.validJobCardList[0].ETT_Tread_Master_Allocation__c}" />
                                                            </aura:iteration>
                                                        </lightning:select-->
                                                    </div>
                                                    <div class="slds-col slds-size_1-of-2">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Desired Tread Pattern</label>
                                                       <!-- <lightning:input type="text" value="{!v.current_line.jobLineItem.ETT_Desired_Tread_Pattern__c}"  step="0.01"/> -->
                                                        <aura:if isTrue="{!v.current_line.relatedJobWrapper.validJobCardList[0].ETT_No_of_Buffing_revisions__c eq 1}">
                                                            <c:customLookupPatternMaster objectAPIName="ETT_Tread_Master__c" IconName="standard:account" label="" selectedRecord="{!v.selectedLookUpRecord}" toolsStockList="{!v.toolsStockAndFactory}"/>
                                                            
                                                            <aura:set attribute="else">
                                                               <lightning:input type="text" variant="label-hidden" value="{!v.current_line.jobLineItem.Desired_Tread_Pattern__c}" disabled="true"/>  
                                                            </aura:set>
                                                            
                                                        </aura:if>
                                                                                                             
                                                    </div>
                                                </div>

                                                <aura:if isTrue="{!or(not(v.tyreMaster eq null),not(v.tyreMaster.Id eq 'null'))}">
                                                    <div class="slds-form-element textboxdiv slds-grid slds-gutters">
                                                      
                                                        <div class="slds-col slds-size_1-of-2">
                                                            <label class="slds-form-element__label slds-text-title_bold" for="select-01">Tyre Actual Width (in mm)</label>
                                                            <lightning:input type="number" value="{!v.tyreMaster.ETT_Actual_Width__c}"  step="0.01" disabled="true"/>
                                                        </div>
                                                        <div class="slds-col slds-size_1-of-2">
                                                            <label class="slds-form-element__label slds-text-title_bold" for="select-01">Desired Tyre Width (in mm)</label>
                                                            <lightning:input type="number" value="{!v.current_line.jobLineItem.ETT_Desired_Width__c}"  step="0.01"/>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element textboxdiv slds-grid slds-gutters">
                                                        <div class="slds-col slds-size_1-of-2">
                                                            <label class="slds-form-element__label slds-text-title_bold" for="select-01">Tyre Actual Length (in mm)</label>
                                                            <lightning:input type="number" value="{!v.tyreMaster.ETT_Length__c}" step="0.01" disabled="true"/>
                                                        </div>
                                                        <div class="slds-col slds-size_1-of-2">
                                                            <label class="slds-form-element__label slds-text-title_bold" for="select-01">Desired Tyre Length (in mm)</label>
                                                            <lightning:input type="number" value="{!v.current_line.jobLineItem.ETT_Desired_Length__c}"  step="0.01"/>
                                                        </div>
                                                    </div>
                                                  <!--  <div class="slds-form-element textboxdiv slds-grid slds-gutters">
                                                        <div class="slds-col slds-size_1-of-2">
                                                            <label class="slds-form-element__label slds-text-title_bold" for="select-01">Tyre Actual OD (in mm)</label>
                                                            <lightning:input type="number" value="{!v.tyreMaster.ETT_Tyre_Outer_Diameter_OD__c}"  step="0.01" disabled="true"/>
                                                        </div>
                                                        <div class="slds-col slds-size_1-of-2">
                                                            <label class="slds-form-element__label slds-text-title_bold" for="select-01">Desired Tyre OD (in mm)</label>
                                                            <lightning:input type="number" value="{!v.current_line.jobLineItem.ETT_Tyre_Desired_OD__c}"  step="0.01"/>
                                                        </div>
                                                    </div>-->
                                                    <aura:set attribute="else">
                                                        Unable to find related tyre master in the system in order to update width, length, OD value
                                                    </aura:set>
                                                </aura:if>
                                              
                                                
                                                 <div class="slds-form-element textboxdiv slds-grid slds-gutters">
                                                    <div class="slds-col slds-size_1-of-2">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Factory Stock Units</label>
                                                        <aura:if isTrue="{!v.current_line.relatedJobWrapper.validJobCardList[0].ETT_No_of_Buffing_revisions__c eq 1}">
                                                            
                                                            <lightning:input type="text" value="{!v.toolsStockAndFactory[0]}"  step="0.01" disabled="true"/>
                                                            <aura:set attribute="else">
                                                                <lightning:input type="text" variant="label-hidden" value="{!v.current_line.jobLineItem.Factory_Stock_Units__c}" disabled="true"/>
                                                            </aura:set>
                                                            
                                                        </aura:if>
                                                    </div>
                                                    <div class="slds-col slds-size_1-of-2">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Main Stock Units</label>
                                                        <aura:if isTrue="{!v.current_line.relatedJobWrapper.validJobCardList[0].ETT_No_of_Buffing_revisions__c eq 1}">
                                                            <lightning:input type="text" value="{!v.toolsStockAndFactory[1]}"  step="0.01" disabled="true"/>  
                                                            <aura:set attribute="else">
                                                                <lightning:input type="text" variant="label-hidden" value="{!v.current_line.jobLineItem.Main_Stock_Units__c}" disabled="true"/>
                                                            </aura:set>
                                                        </aura:if>
                                                    </div>
                                                </div>
                                            </div>
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if> 
                            
                            <aura:if isTrue="{!and(v.current_sequence eq 8,v.current_line.jobLineItem.Sequence__c eq 8)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="{!v.current_sequence+'. Next Stage &amp; Status Update'}"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                                    <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                        <b>Error:&nbsp;</b>{!v.step_error}
                                                    </div>
                                                </aura:if>
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Buffing Status</label>
                                                    <div>
                                                        <lightning:select value="{!v.current_line.relatedJobWrapper.validJobCardList[0].ETT_Buffing_Status__c}" name="Status" label="Select Buffing Status" variant="label-hidden">
                                                            <aura:iteration items="{!v.statusValues}" var="inv" indexVar="key">
                                                                <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.current_line.relatedJobWrapper.validJobCardList[0].ETT_Buffing_Status__c}"/>
                                                            </aura:iteration>
                                                        </lightning:select>
                                                    </div>
                                                </div> 
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Technician Remarks</label>
                                                    <div>
                                                        <lightning:textarea name="remarks" value="{!v.current_line.jobLineItem.ETT_Remarks__c}" label="" />
                                                    </div>
                                                </div> 
                                                <aura:if isTrue="{!v.current_line.relatedJobWrapper.validJobCardList[0].ETT_Buffing_Status__c eq 'Accepted'}">
                                                    <div class="slds-form-element textboxdiv">
                                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Next Station To Choose</label>
                                                        <div>
                                                            <lightning:select value="{!v.selectedNextStation}" name="" label="" variant="label-hidden" disabled="{!v.current_line.relatedJobWrapper.validJobCardList[0].ETT_No_of_Buffing_revisions__c eq 1}">
                                                                <aura:iteration items="{!v.availableStations}" var="inv" indexVar="key">
                                                                    <option text="{!inv.value}" value="{!inv.value}" selected="{!inv.value == v.selectedNextStation}" /> 
                                                                </aura:iteration>	
                                                            </lightning:select>
                                                        </div>
                                                    </div>
                                                </aura:if>                                     
                                            </div>
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if> 
                            
                            <aura:if isTrue="{!and(v.current_sequence eq 9,v.current_line.jobLineItem.Sequence__c eq 9)}">
                                <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                                    <aura:if isTrue="{!!v.openToolsReqSection}">
                                        <lightning:card  title="Notes:"> 
                                            <div style="width:60%;margin:auto;margin-bottom:15px">
                                                <a target="_blank" class="processlink" href="{!$Resource.ETT_Buffing_Process_Tutorial}" title="Process Tutorial">Process Tutorial</a>
                                                <div class="slds-col slds-size_12-of-12" style="color:green">
                                                    <b>No more steps pending for this job card under this stage. Please close the window.</b>
                                                </div>
                                            </div>
                                        </lightning:card>
                                    </aura:if>
                                </aura:if>
                            </aura:if>
                            
                            <!--on hold section-->
                            <aura:if isTrue="{!v.confirmHoldVar}">
                                <lightning:card  title="Confirm Hold Actvity"> 
                                    <div style="width:60%;margin:auto;margin-bottom:15px">
                                        
                                        <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                            <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                <b>Error:&nbsp;</b>{!v.step_error}
                                            </div>
                                        </aura:if>                                        
                                        <div class="slds-col slds-size_12-of-12">
                                            <aura:if isTrue="{!not(v.current_line.jobLineItem.Id eq null)}">
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-m-right_none">Reason for hold</label>
                                                    <lightning:select value="{!v.lineItemForHold.jobLineItem.ETT_Pause_Reason__c}" label="Reason for hold" title="Reason for hold" variant="label-hidden" class="holdReason">
                                                        <aura:iteration items="{!v.holdReasonValues}" var="inv" indexVar="key">
                                                            <option text="{!inv.value}" value="{!inv.key}" selected="{!inv.key == v.lineItemForHold.jobLineItem.ETT_Pause_Reason__c}"/>
                                                        </aura:iteration>
                                                    </lightning:select>&nbsp;
                                                </div>   
                                                <div class="slds-form-element textboxdiv">
                                                    <label class="slds-form-element__label slds-text-title_bold" for="select-01">Remarks</label>
                                                    <div>
                                                        <lightning:textarea name="remarks" value="{!v.lineItemForHold.jobLineItem.ETT_Remarks__c}" label="" />
                                                    </div>
                                                </div> 
                                                <aura:set attribute="else">
                                                    No activity has been started so far.
                                                </aura:set>
                                            </aura:if>
                                        </div>
                                    </div>
                                </lightning:card>
                            </aura:if>
                            
                            <!--usage tracker section-->
                            <aura:if isTrue="{!v.usageSection}">
                                <lightning:card  title="Tools/Material Usage Tracker"> 
                                    <div style="width:80%;margin:auto;margin-bottom:15px">
                                        <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                            <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                                <b>Error:&nbsp;</b>{!v.step_error}
                                            </div>
                                        </aura:if>
                                        
                                        <div class="slds-form-element textboxdiv">
                                            <label class="slds-form-element__label slds-text-title_bold" for="select-01">Update Tools/Material Usage</label>
                                            <br/><br/>
                                            <div class="slds-form-element tool_Secondsec">
                                                <ul type="a">
                                                    <aura:iteration items="{!v.toolUsageListOptions}" var="sf" indexVar="i">
                                                        <aura:if isTrue="{!sf.toolAllocationDet.ETT_Tools_Master__r.ETT_Usage_type__c eq 'Consumable'}">
                                                            <label class="slds-form-element__label slds-text-title_bold" for="select-01">{!sf.toolAllocationDet.ETT_Tools_Master__r.Name}&nbsp; (Available Stocks : {!sf.toolAllocationDet.ETT_Available_Stocks__c}&nbsp;{!sf.toolAllocationDet.ETT_Tools_Master__r.Unit_Text__c})</label>
                                                            <lightning:input step="0.01" type="number" name="{!sf.toolAllocationDet.ETT_Tools_Master__r.Name}" value="{!sf.toolUsage.ETT_Usage_Value__c}" placeholder="{!sf.toolAllocationDet.ETT_Tools_Master__r.ETT_Unit_type__c}"/>
                                                            <br/>
                                                        </aura:if>                                                           
                                                    </aura:iteration>
                                                    <aura:iteration items="{!v.toolUsageListOptions}" var="sf" indexVar="i">
                                                        <aura:if isTrue="{!and(sf.toolAllocationDet.ETT_Tools_Master__r.ETT_Usage_type__c eq 'Depreciable',sf.toolAllocationDet.ETT_Tools_Master__r.ETT_Track_Depreciable_Item_Usage_at_JC__c eq 'Track')}">
                                                            <aura:if isTrue="{!sf.toolAllocationDet.ETT_Tools_Master__r.Depreciable_item_selection_behaviour__c eq 'Display selection'}">
                                                                <label class="slds-form-element__label slds-text-title_bold" for="select-01">{!sf.toolAllocationDet.ETT_Tools_Master__r.Name}</label>
                                                                <lightning:input type="checkbox" checked="{!sf.toolUsage.ETT_Whether_it_s_used_or_not__c}" title="Did you used this tool/material"/>
                                                                <br/>
                                                            </aura:if>
                                                        </aura:if>                                                             
                                                    </aura:iteration>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </lightning:card>
                            </aura:if>
                            
                            <!--new tool request section-->
                            <aura:if isTrue="{!v.openToolsReqSection}">
                                <div style="width:80%;margin:auto;margin-bottom:15px">
                                    <aura:if isTrue="{!and(not(v.step_error eq null),not(v.step_error eq ''))}">
                                        <div class="slds-col slds-size_12-of-12" style="color:red;margin-bottom: .5rem;">
                                            <b>Error:&nbsp;</b>{!v.step_error}
                                        </div>
                                    </aura:if>
                                    <div class="slds-form-element textboxdiv">
                                        <label class="slds-form-element__label slds-text-title_bold" for="select-01">Select Tool(s) &amp; Consumables for New Request</label>
                                        <br/>
                                        <div>
                                            <aura:iteration items="{!v.toolsListOptions}" var="sf" indexVar="i">
                                                <div class="slds-form-element tool_Secondsec">
                                                    <ul type="a">
                                                        <lightning:input type="checkbox" checked="{!sf.isSelected}" label="{!sf.label}" disabled="{!not(sf.toolAllocationDet.Allocation_Status__c eq 'Approved')}"/>
                                                        <aura:if isTrue="{!sf.isSelected}">                                                            
                                                            <div>
                                                                <div class="slds-grid slds-gutters slds-p-top_x-small">
                                                                    <div class="slds-col slds-size_1-of-2">
                                                                        <img src="{!sf.toolImageLink}" style="width:300px"/>                                                                        
                                                                    </div>
                                                                    <div class="slds-col slds-size_1-of-2">
                                                                        <div class="slds-form-element textboxdiv">
                                                                            <label class="slds-form-element__label slds-text-title_bold" for="select-01">Remarks Comment</label>
                                                                            <div>
                                                                                <lightning:textarea title="Remarks" value="{!sf.remarks}" label=""/>
                                                                            </div>
                                                                        </div>
                                                                        <div class="slds-form-element textboxdiv">
                                                                            <label class="slds-form-element__label slds-text-title_bold" for="select-01">Requesting Stock Units [Type: {!sf.toolAllocationDet.ETT_Tools_Master__r.ETT_Unit_type__c}, Individual Unit Value: {!sf.toolAllocationDet.ETT_Tools_Master__r.ETT_Individual_Unit_Value__c}, Usage type: {!sf.toolAllocationDet.ETT_Tools_Master__r.ETT_Usage_type__c}]</label>
                                                                            <div>
                                                                                <lightning:input type="number" name="stock needed" value="{!sf.requestedStockUnits}" />
                                                                            </div>
                                                                        </div>
                                                                        <lightning:input height="200" 
                                                                                         width="350" 
                                                                                         label="File Upload"  
                                                                                         id="{!i}"
                                                                                         files="{!v.fileToBeUploaded}"
                                                                                         type="file"  
                                                                                         name="Used Tool Picture"  
                                                                                         multiple="false" 
                                                                                         required="false" 
                                                                                         onchange="{!c.handleFilesChange}"/>
                                                                        <aura:iteration items="{!sf.lstFileWrapperDetails}" var="f">
                                                                            {!f.strFileName}<br/>
                                                                        </aura:iteration>
                                                                    </div>
                                                                </div>                                                                
                                                            </div>
                                                            <br/>
                                                        </aura:if>
                                                    </ul>
                                                    <br/>
                                                </div>
                                            </aura:iteration>
                                        </div>
                                    </div>
                                    <aura:if isTrue="{!v.current_line.jobLineItem.ETT_Tool_Material_Request_Raised__c}">
                                        <br/><br/>
                                        <div class="slds-form-element textboxdiv">
                                            <label class="slds-form-element__label slds-text-title_bold" for="select-01">Request(s) Information &amp; Status</label>
                                            <div>
                                                <aura:iteration items="{!v.newToolRequests}" var="sf" indexVar="i">
                                                    <div class="slds-form-element tool_Secondsec">
                                                        <ul type="a">
                                                            #{!sf.toolMaster.Name} - ({!sf.toolAllocation.Allocation_Status__c})
                                                        </ul>
                                                    </div>
                                                </aura:iteration>
                                            </div>
                                        </div>
                                    </aura:if>
                                </div>
                            </aura:if> 
                            
                        </aura:if>
                        
                        <aura:if isTrue="{!v.showNoRecordsMessage}">
                            <h2 style="text-align:center;font-weight: 600;font-size: 16px;color: #ce4242;">No Record Found! </h2> 
                        </aura:if> 
                    </div>  
                </div>
                
                <!--Modal/Popup Box Footer Starts here-->
                <footer class="slds-modal__footer">                


                    <aura:if isTrue="{!and(!v.confirmHoldVar,!v.usageSection)}">
                        <aura:if isTrue="{!and(!v.openToolsReqSection,!v.isOnHold)}">
                             <!--aura:if isTrue="{!and(not(v.current_sequence eq 6))}"-->
                          
                            <aura:if isTrue="{!and(not(v.current_sequence eq 8),not(v.current_sequence eq 21))}">  
                                <lightning:button variant="brand" label="Hold" title="Hold" onclick="{!c.showHoldDialog}"/>
                                
                                <aura:if isTrue="{!and(v.current_sequence >= 5,v.current_line.jobLineItem.Sequence__c >= 5)}">    
                                    <lightning:button variant="brand" label="Open Usage Tracker" title="Open Usage Tracker" onclick="{!c.openUsageTracker}"/>
                                </aura:if>
                                <lightning:button variant="brand" label="Request New Tool/Material" title="Request New Tool/Material" onclick="{!c.openToolsReqSectionOperation}"/>
                            </aura:if>
                        <!--/aura:if-->
                        </aura:if>
                    </aura:if>
                    
                    <aura:if isTrue="{!v.isOnHold}">
                        <lightning:button variant="brand" label="Resume" title="Resume" onclick="{!c.resumeActivity}"/>
                    </aura:if>
                    
                    <aura:if isTrue="{!v.confirmHoldVar}">
                        <aura:if isTrue="{!not(v.current_line.jobLineItem.Id eq null)}">
                            <lightning:button variant="brand" label="Hold" title="Hold" onclick="{!c.confirmOnHold}"/>
                        </aura:if>
                        <lightning:button variant="brand" label="Back" title="Back" onclick="{!c.continueActivities}"/>
                    </aura:if>
                    
                    <aura:if isTrue="{!v.usageSection}">
                        <lightning:button variant="brand" label="Save Usage" title="Save Usage" onclick="{!c.saveUsage}"/>
                        <lightning:button variant="brand" label="Back" title="Back" onclick="{!c.backFromUsage}"/>
                    </aura:if>
                    
                    <aura:if isTrue="{!or(v.current_line.jobLineItem.ETT_Tool_Material_Request_Raised__c eq true,!empty(v.newToolRequests))}">
                        <lightning:button variant="brand" label="Refresh Request Status(s)" title="Refresh" onclick="{!c.refreshSection}"/>
                    </aura:if>
                    
                    <aura:if isTrue="{!v.openToolsReqSection}">
                        <lightning:button variant="brand" label="Create Request(s)" title="Create Request(s)" onclick="{!c.createToolRequest}"  name="toolReq"/>
                        <lightning:button variant="brand" label="Back" title="Back" onclick="{!c.backFromToolReqPage}"/> 
                    </aura:if>
                    
                    <aura:if isTrue="{!and(!v.isOnHold,!v.confirmHoldVar)}">
                        <aura:if isTrue="{!and(!v.usageSection,!v.openToolsReqSection)}">
                            
                            <aura:if isTrue="{!and(v.current_sequence eq 1,v.current_line.jobLineItem.Sequence__c eq 1)}">
                                <lightning:button variant="brand" label="Proceed" title="Proceed" onclick="{!c.goToStep2}"/><!--Skipped prev steps -->
                            </aura:if>
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 2,v.current_line.jobLineItem.Sequence__c eq 2)}">       
                                <aura:if isTrue="{!and(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Not Good',v.current_line.jobLineItem.ETT_Status__c eq 'Not Started')}">
                                    <lightning:button variant="brand" label="Start Floor Cleaning" title="Start Floor Cleaning" onclick="{!c.startFloorCleaning}"/>
                                </aura:if>
                                <aura:if isTrue="{!or(not(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Not Good'),not(v.current_line.jobLineItem.ETT_Status__c eq 'Not Started'))}">
                                    <lightning:button variant="brand" label="Next" title="Next" onclick="{!c.goToStep3}"/>
                                </aura:if>
                            </aura:if-->
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 3,v.current_line.jobLineItem.Sequence__c eq 3)}">             	
                                <aura:if isTrue="{!and(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Not Good',v.current_line.jobLineItem.ETT_Status__c eq 'Not Started')}">
                                    <lightning:button variant="brand" label="Start Light Adjustment" title="Start Light Adjustment" onclick="{!c.startLightWorks}"/>
                                </aura:if>
                                <aura:if isTrue="{!or(not(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Not Good'),not(v.current_line.jobLineItem.ETT_Status__c eq 'Not Started'))}">
                                    <lightning:button variant="brand" label="Next" title="Next" onclick="{!c.goToStep4}"/>
                                </aura:if>
                            </aura:if-->
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 4,v.current_line.jobLineItem.Sequence__c eq 4)}"> 
                                <aura:if isTrue="{!and(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Not Correct',v.current_line.jobLineItem.ETT_Status__c eq 'Not Started')}">
                                    <lightning:button variant="brand" label="Start Buffer Adjustment" title="Start Buffer Adjustment" onclick="{!c.startBufferSettings}"/>
                                </aura:if>
                               <aura:if isTrue="{!or((v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Correct'),(v.current_line.jobLineItem.ETT_Final_Activity_State__c eq 'Correct'))}">
                                  <lightning:button variant="brand" label="Next" title="Next" onclick="{!c.goToStep5}"/>
                                </aura:if>
                            </aura:if-->  
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 5,v.current_line.jobLineItem.Sequence__c eq 5)}"> 
                                <aura:if isTrue="{!or(not(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Not Good'),v.current_line.jobLineItem.ETT_Tool_Material_Request_Raised__c)}">
                                    <lightning:button variant="brand" label="Next" title="Next" onclick="{!c.goToStep6}"/>
                                </aura:if>
                            </aura:if-->  
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 6,v.current_line.jobLineItem.Sequence__c eq 6)}">  
                                <aura:if isTrue="{!or(not(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Not Good'),v.current_line.jobLineItem.ETT_Tool_Material_Request_Raised__c)}">
                                    <lightning:button variant="brand" label="Next" title="Next" onclick="{!c.goToStep7}"/>
                                </aura:if>
                            </aura:if-->  
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 7,v.current_line.jobLineItem.Sequence__c eq 7)}">             	
                                <aura:if isTrue="{!and(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Yes',v.current_line.jobLineItem.ETT_Status__c eq 'Not Started')}">
                                    <lightning:button variant="brand" label="Start Powder Replacement" title="Start Powder Replacement" onclick="{!c.startPowderReplacementWorks}"/>
                                </aura:if>
                                <aura:if isTrue="{!or(not(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Yes'),not(v.current_line.jobLineItem.ETT_Status__c eq 'Not Started'))}">
                                    <lightning:button variant="brand" label="Next" title="Next" onclick="{!c.goToStep8}"/>
                                </aura:if>
                            </aura:if-->
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 8,v.current_line.jobLineItem.Sequence__c eq 8)}">  
                                 <aura:if isTrue="{!and(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Not Good',v.current_line.jobLineItem.ETT_Status__c eq 'Not Started')}">
                                    <lightning:button variant="brand" label="Start Job" title="Start Job" onclick="{!c.startRaspHubCheck}"/>
                                </aura:if-->
                                <!-- <aura:if isTrue="{!or(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Good',or(v.current_line.jobLineItem.ETT_Final_Activity_State__c eq 'Yes' , v.current_line.jobLineItem.ETT_Final_Activity_State__c eq 'No'))}">-->
                                 <!--aura:if isTrue="{!or(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Good',or(v.current_line.jobLineItem.ETT_Final_Activity_State__c eq 'Not Good' , v.current_line.jobLineItem.ETT_Final_Activity_State__c eq 'Good'))}">
                                    <lightning:button variant="brand" label="Next" title="Next" onclick="{!c.goToStep9}"/>
                                </aura:if>
                            </aura:if-->
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 9,v.current_line.jobLineItem.Sequence__c eq 9)}">             	
                                <aura:if isTrue="{!and(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Not Good',v.current_line.jobLineItem.ETT_Status__c eq 'Not Started')}">
                                    <lightning:button variant="brand" label="Start Job" title="Start Job" onclick="{!c.startSuctionLineWork}"/>
                                </aura:if>
                                <aura:if isTrue="{!or(not(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Not Good'),not(v.current_line.jobLineItem.ETT_Status__c eq 'Not Started'))}">
                                    <lightning:button variant="brand" label="Next" title="Next" onclick="{!c.goToStep10}"/>
                                </aura:if>
                            </aura:if-->
                            
                            <!--aura:if isTrue="{!and(v.current_sequence eq 10,v.current_line.jobLineItem.Sequence__c eq 10)}">  
                                <aura:if isTrue="{!or(not(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Low'),v.current_line.jobLineItem.ETT_Tool_Material_Request_Raised__c)}">
                                    <lightning:button variant="brand" label="Next" title="Next" onclick="{!c.goToStep11}"/>
                                </aura:if>
                            </aura:if-->  
                            
                            <aura:if isTrue="{!and(v.current_sequence eq 11,v.current_line.jobLineItem.Sequence__c eq 11)}"> 
                                <aura:if isTrue="{!or(not(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Low'),v.current_line.jobLineItem.ETT_Tool_Material_Request_Raised__c)}">
                                    <lightning:button variant="brand" label="Next" title="Next" onclick="{!c.goToStep12}"/>
                                </aura:if>
                            </aura:if>  
                            
                            <!--Tyre Inflation check -->
                            <aura:if isTrue="{!and(v.current_sequence eq 2,v.current_line.jobLineItem.Sequence__c eq 2)}">             	
                                <aura:if isTrue="{!and(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'No',v.current_line.jobLineItem.ETT_Status__c eq 'Not Started')}">
                                    <lightning:button variant="brand" label="Start Job" title="Start Job" onclick="{!c.startInflationCheck}"/>
                                </aura:if>
                                <aura:if isTrue="{!or(not(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'No'),not(v.current_line.jobLineItem.ETT_Status__c eq 'Not Started'))}">
                                    <lightning:button variant="brand" label="Next" title="Next" onclick="{!c.goToStep13}"/>
                                </aura:if>
                            </aura:if>
                            
                            <aura:if isTrue="{!and(v.current_sequence eq 3,v.current_line.jobLineItem.Sequence__c eq 3)}">             	
                                <aura:if isTrue="{!and(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'No',v.current_line.jobLineItem.ETT_Status__c eq 'Not Started')}">
                                    <lightning:button variant="brand" label="Start Job" title="Start Job" onclick="{!c.startRaspHubCheck}"/>
                                </aura:if>
                                <aura:if isTrue="{!or(not(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'No'),(v.current_line.jobLineItem.ETT_Final_Activity_State__c eq 'Yes'),(v.current_line.jobLineItem.ETT_Final_Activity_State__c eq 'No'))}">
                                    <lightning:button variant="brand" label="Next" title="Next" onclick="{!c.goToStep14}"/>
                                </aura:if>
                            </aura:if>
                            
                            <aura:if isTrue="{!and(v.current_sequence eq 4,v.current_line.jobLineItem.Sequence__c eq 4)}">             	
                                <aura:if isTrue="{!and(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Yes',v.current_line.jobLineItem.ETT_Status__c eq 'Not Started')}">
                                    <lightning:button variant="brand" label="Start Job" title="Start Job" onclick="{!c.startTyreStoneCheck}"/>
                                </aura:if>
                              <aura:if isTrue="{!or(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'No',or(v.current_line.jobLineItem.ETT_Final_Activity_State__c eq 'Yes' , v.current_line.jobLineItem.ETT_Final_Activity_State__c eq 'No'))}">

                                    <lightning:button variant="brand" label="Next" title="Next" onclick="{!c.goToStep15}"/>
                                </aura:if>
                            </aura:if>
                            
                            <aura:if isTrue="{!and(v.current_sequence eq 5,v.current_line.jobLineItem.Sequence__c eq 5)}">    
                                <lightning:button variant="brand" label="Next" title="Next" onclick="{!c.goToStep16}"/>
                            </aura:if>
                            
                          <!--  <aura:if isTrue="{!and(v.current_sequence eq 17,v.current_line.jobLineItem.Sequence__c eq 17)}">    
                                <lightning:button variant="brand" label="Next" title="Next" onclick="{!c.goToStep18}"/>
                            </aura:if> -->
                             
                            <!--aura:if isTrue="{!and(v.current_sequence eq 6,v.current_line.jobLineItem.Sequence__c eq 6)}"> 
                                <div class="selectall">                    
                                    <div class="checkdiv"><input type="checkbox" name="options" id="allCheckBox" value="" aria-describedby="error_01" onclick="{!c.handleCheckAllBox}"/></div>
                                    <div class="checkdtext">Verified All </div>
                                    <lightning:button variant="brand" disabled="{!v.isJobDisabled}" label="Next" title="Next" onclick="{!c.goToStep17}"/>
                                </div>
                            </aura:if-->
                            
                            <aura:if isTrue="{!and(v.current_sequence eq 6,v.current_line.jobLineItem.Sequence__c eq 6)}">             	
                                <aura:if isTrue="{!and(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Not Matched',v.current_line.jobLineItem.ETT_Status__c eq 'Not Started')}">
                                    <lightning:button variant="brand" label="Start Job" title="Start Job" onclick="{!c.startScanSurfaceCheck}"/>
                                </aura:if>
                                <aura:if isTrue="{!or(not(v.current_line.jobLineItem.ETT_Initial_Activity_State__c eq 'Not Matched'),not(v.current_line.jobLineItem.ETT_Status__c eq 'Not Started'))}">
                                    <lightning:button variant="brand" label="Next" title="Next" onclick="{!c.goToStep18}"/>
                                </aura:if>
                            </aura:if>
                            
                            <aura:if isTrue="{!and(v.current_sequence eq 7,v.current_line.jobLineItem.Sequence__c eq 7)}">    
                                <lightning:button variant="brand" label="Next" title="Next" onclick="{!c.goToStep19}"/>
                            </aura:if> 
                            
                            <aura:if isTrue="{!and(v.current_sequence eq 8,v.current_line.jobLineItem.Sequence__c eq 8)}">    
                                <lightning:button variant="brand" label="Complete" title="Complete" onclick="{!c.goToStep20}"/>
                            </aura:if>
                        
                        </aura:if>
                    </aura:if>
                    
                    <div class="blink_me" >
                        <p>
                            <div>
                                <strong style="color:red;font-size:16px;">CAUTION: </strong>Excessive smoke and heat emitted indicates that either pressing the buffer too hard and/or buffing blades are already worn out. Release the buffing pressure or replace the buffing blade is necessary to avoid scorching to the rubber fire hazard.All buffed radial tyre casings to be cemented with in 8 hours.
                            </div>                            
                        </p>
                    </div>
                   
                    
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </aura:if>
</aura:component>