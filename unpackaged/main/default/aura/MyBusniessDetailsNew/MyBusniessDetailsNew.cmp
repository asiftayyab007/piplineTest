<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction"
                access="global" controller='ET_B2BController'>
    
    <!-- Handling events -->
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
    <!--ShowYear -->
    <aura:attribute name="currentDate" type="Date"/>
    <aura:handler event="c:MyBusinessEvent" action="{!c.handleApplicationEvent}" />
    <lightning:overlayLibrary aura:id="overlayLib"/>
    <aura:attribute name="today" type="Date" />
    <!-- Registering events -->
    <aura:registerEvent name="appEvent" type="c:MyBusinessDetailPageEvent"/>
    <aura:attribute name="more" type="Boolean"  />
    <aura:attribute name="viewFile" type="Boolean"  /> 
    <aura:attribute name="isUpload" type="Boolean"  />
    <aura:attribute name="isADNOC" type="Boolean"  />
    <aura:attribute name="isParent" type="Boolean"  />
    <aura:attribute name="accountId" type="Id"  />
    <aura:attribute name="accountName" type="String"  />
    <aura:attribute name="currentaccountId" type="Id"  />
    <aura:attribute name="docId" type="List"  />
    <aura:attribute name="selectedDocIds" type="List"  />
    <aura:attribute name="addMore" type="Boolean" default="true" />
    <aura:attribute name="offHire" type="Boolean" default="false" />
    <aura:attribute name="hold" type="Boolean" default="false" />
    <aura:attribute name="addMoreRequest" type="Boolean"  /> 
    <aura:attribute name="terminateRequest" type="Boolean"  />
    <aura:attribute name="currentPO" type="String"  />
    <aura:attribute name="cumpercent" type="String"  />
    <aura:attribute name="currentMonth" type="String"  />
    <aura:attribute name="currentType" type="String"  />
    <!-- Attributes to handle Business Menu Click--> 
    <aura:attribute name="salesAgreementDashboard" type="Boolean" default="true" />
    <aura:attribute name="maintenanceAgreementDashboard" type="Boolean" default="true" />
    <aura:attribute name="salesAgreement" type="Boolean" />
    <aura:attribute name="otherAgreement" type="Boolean" />
    <aura:attribute name="maintenanceAgreement" type="Boolean" />
    <aura:attribute name="assignResources" type="Boolean" />
    <aura:attribute name="assignVehicles" type="Boolean" /> 
    <aura:attribute name="assignMaintenanceWo" type="Boolean" /> 
    <aura:attribute name="assignEstimation" type="Boolean" /> 
    <aura:attribute name="assignActiveMaintenanceWo" type="Boolean" /> 
    <aura:attribute name="invoices" type="Boolean" />
    <aura:attribute name="schools" type="Boolean" />
    <aura:attribute name="sites" type="Boolean" />
    <aura:attribute name="govtSchool" type="Boolean" />
    <aura:attribute name="isSalesAggs" type="Boolean" />
    <aura:attribute name="isOtherAggs" type="Boolean" />
    <aura:attribute name="isHSEDetail" type="Boolean" />
    <aura:attribute name="isMaintenanceAggs" type="Boolean" />
    <aura:attribute name="assignMaintenanceVehicles" type="Boolean" />
    <aura:registerEvent name="Actionname" type="c:ETST_sendDataEvent"/>
    
    <aura:attribute name="invoicesList" type="List" />
    <aura:attribute name="paidList" type="List" />
    <aura:attribute name="unpaidList" type="List" />
    <aura:attribute name="hsescores" type="List" />
    <aura:attribute name="cntList" type="List" />
    <aura:attribute name="cntList1" type="List" />
    <aura:attribute name="cntList2" type="List" />
    <aura:attribute name="currentInvoicesList" type="List" /> 
    <aura:attribute name="poList" type="List" />
    <aura:attribute name="Accountdropdownlist" type="List" />
    <aura:attribute name="currentpoList" type="List" />
    <aura:attribute name="maintenencePOList" type="List" />
    <aura:attribute name="otherpoList" type="List" />
    <aura:attribute name="currentCalloutList" type="List" />
    <aura:attribute name="opportunityList" type="List"/>
    <aura:attribute name="siteList" type="List" />
    <aura:attribute name="currentsiteData" type="List" />
    <aura:attribute name="vehileList" type="List" />
    <aura:attribute name="currentvehileList" type="List" />	
    <aura:attribute name="vehicleMaintenanceList" type="List" /> 
    <aura:attribute name="maintenanceWoList" type="List" /> 
    <aura:attribute name="maintenanceEstList" type="List" /> 
    <aura:attribute name="activeMaintenanceWoList" type="List" /> 
    <aura:attribute name="VehicleCount" type="List" />
    <aura:attribute name="resourceCount" type="List" /> 
    <aura:attribute name="resourceList" type="List" />
    <aura:attribute name="currentresourceList" type="List" />	
    <!-- Attributes to calculate Dashboard Values-->
    <aura:attribute name="activeSalesAgreements" type="Integer" default="0" />
    <aura:attribute name="activeMaintenanceAgreements" type="Integer" default="0" />
    <aura:attribute name="activeotherAgreements" type="Integer" default="0" />
    <aura:attribute name="activeVehicles" type="Integer" default="0" />
    <aura:attribute name="activeResources" type="Integer" default="0" />
    <aura:attribute name="activeInvoices" type="Integer" default="0" />
    <aura:attribute name="activeSites" type="Integer" default="0" />
    <!-- aditional school business attributes-->
    <aura:attribute name="activeSchools" type="Integer" default="0" />
    <aura:attribute name="activeStudents" type="Integer" default="0" />
    <!--  <aura:attribute name="caseRecord" type="Case"  default="{'sObjectType':'Case','Description':'','RecordTypeId':'0122z0000000BzCAAU','Business_Request_Type__c':'','Preferred_Date__c':'','No_of_Vehicle__c':'','Customer_PO__c':'','AccountId':'No_Of_Resources','Business_Type__c':'B2B'}" />-->
    <aura:attribute name="caseRecord" type="Case"  default="{'sObjectType':'Case','Description':'','Business_Request_Type__c':'','Preferred_Date__c':'','No_of_Vehicle__c':'','Customer_PO__c':'','AccountId':'No_Of_Resources','Business_Type__c':'B2B'}" />
    <aura:attribute name="opp" type="Opportunity"  default="{'sObjectType':'Opportunity','Description':'','RecordTypeId':'','No_of_Resources__c':'','No_of_Vehicles__c':'','CloseDate':'','Customer_PO__c':'','AccountId':'','Effective_From__c':'','Effective_To__c':'','API_Service_Name__c':''}" />
    
    <!-- Attributes to handle My Business Dashboard click-->
    <aura:attribute name="salesAgreementClick" type="Boolean" />
    <aura:attribute name="maintenanceAgreementClick" type="Boolean" />
    <aura:attribute name="assignResourcesClick" type="Boolean" />
    <aura:attribute name="assignVehiclesClick" type="Boolean" />
    <aura:attribute name="invoicesClick" type="Boolean" />
    <!-- aditional school business attributes-->
    <aura:attribute name="schoolsClick" type="Boolean"/>
    <aura:attribute name="studentsClick" type="Boolean"/>
    
    <aura:attribute name="businessWrapper" type="ET_BusinessCommunityController.MyBusinessWrapper" />
    
    <!-- Attributes to show detail page modal popup -->
    <aura:attribute name="showRecordDetailModal" type="Boolean" default="false"/>
    <aura:attribute name="recordDetailId" type="String" />
    <aura:attribute name="recordTypeName" type="String" />
    <aura:attribute name="fileName" type="List" />
    <aura:attribute name="searchText" type="String" />
    
    <!-- Attributes added for Custom Record detail popup -->
    <aura:attribute name="showDetailCmp" type="Boolean" default="false"/>
    <aura:attribute name="ObjectName" type="String" />
    <aura:attribute name="objectApiName" type="String" />
    <aura:attribute name="recordName" type="String" />
    <aura:attribute name="fieldApiName1" type="String"/>
    <aura:attribute name="fieldApiName2" type="String"/>
    <aura:attribute name="fieldApiName3" type="String"/>
    <aura:attribute name="fieldApiName4" type="String"/>
    <aura:attribute name="field1Label" type="String"/>
    <aura:attribute name="field2Label" type="String"/>
    <aura:attribute name="field3Label" type="String"/>
    <aura:attribute name="field4Label" type="String"/>
    <aura:attribute name="profileName" type="String" />
    
    <aura:attribute name="sortDirection" type="string" default="asc"/>
    
    <aura:attribute name="timesheetURL" type="String" default=""/>
    
    <aura:attribute name="uploadedFileList" type="Object[]"/>
    
    <aura:attribute name="fileToBeUploaded" type="Object[]"/>
    <aura:attribute name="showSpinner" type="Boolean" default="false"/>
    <aura:attribute name="showDashboard" type="Boolean" default="false"/>
    <aura:attribute name="showAll" type="Boolean" default="true"/>
    <aura:attribute name="trafficFineCount" type="String" default="0"/>
    <aura:attribute name="isTrafficFines" type="Boolean" default="false"/>
    <aura:attribute name="trafficFineList" type="List"/>
    <aura:attribute name="trafficFineFilterList" type="List"/>
    <aura:attribute name="showResourceList" type="Boolean" default="false"/>
    <aura:attribute name="currentResourceVal" type="List"/>
    <aura:attribute name="AllCalloutList" type="List"/>
    <aura:attribute name="showVehicleList" type="Boolean" default="false"/> 
    <aura:attribute name="vehileFilterList" type="List"/>
    <aura:attribute name="currentVehiclesVal" type="List"/>
    <aura:attribute name="salesAgreeFilterList" type="List"/>
    <aura:attribute name="currentYear" type="String"/>
    <aura:attribute name="noOfVisits" type="String" default="0"/>
    <aura:attribute name="isAccVisit" type="Boolean" default="false"/>  
    <aura:attribute name="accVisitFilterList" type="List"/>
    <aura:attribute name="accVisitList" type="List"/>
    <aura:attribute name="isVehAccident" type="Boolean" default="false"/>
    <aura:attribute name="noOfAccidents" type="String" default="0"/>
    <aura:attribute name="noOfFleetReq" type="String" default="0"/>
    <aura:attribute name="accidentsFilterList" type="List"/>
    <aura:attribute name="fleetServiceRequestList" type="List"/>
    <aura:attribute name="accidentsList" type="List"/>
    <aura:attribute name="hseInspections" type="List"/>
    <aura:attribute name="ivmsDevices" type="List"/>
    <aura:attribute name="spotChecks" type="List"/>
    <aura:attribute name="roadSafetyWrksp" type="List"/>
    <aura:attribute name="hseInduction" type="List"/>
    <aura:attribute name="files" type="ContentDocument[]"/> 
    <aura:attribute name="isServiceReq" type="Boolean" default="false"/>
    <aura:attribute name="serviceReqFilterList" type="List"/>
    <aura:attribute name="serviceReqList" type="List"/>
    <aura:attribute name="showSerReqTab" type="Boolean" default="false"/>
    <aura:attribute name="showNewSerReqPopup" type="Boolean" />
    <aura:attribute name="disableSerReqSavebtn" type="Boolean" default="false"/>
    <aura:attribute name="defaultWorkStation" type="String"/>
     <aura:attribute name="showTrafficFineTab" type="Boolean" default="false"/>
     <aura:attribute name="showAccidentHisTab" type="Boolean" default="false"/>
     <aura:attribute name="showTransAgreeTab" type="Boolean" default="false"/>
     <aura:attribute name="showMaintAgreeTab" type="Boolean" default="false"/>
     <aura:attribute name="showVariationOrdTab" type="Boolean" default="false"/>
     <aura:attribute name="showHseInfoTab" type="Boolean" default="false"/>
     <aura:attribute name="showInvoiceTab" type="Boolean" default="false"/>
     <aura:attribute name="showDashboardTab" type="Boolean" default="false"/>
     <aura:attribute name="showVisitsTab" type="Boolean" default="false"/>
     <aura:attribute name="selectedVehicleId" type="String"/>
    <aura:attribute name="selectedVehicleName" type="String"/>
     <aura:attribute name="noTabAccess" type="Boolean" default="false"/>
    
     
    
    <!-- <div align="right">
        <lightning:button class="emmergencyButton" label="Emmergency" title="Emmergency" />
    </div> -->
    <div class="casesupmaindiv">
        <div class="menumaindiv"><div class="menudiv">
            <c:MenuItemsList />
            </div>
        </div>
        <aura:if isTrue="{!v.noTabAccess}">
        <P style="text-align: center;font-size: 25px;margin-top: 9%;">No tabs are assigned to you.</P>
        </aura:if>
        <aura:if isTrue="{!not(empty(v.Accountdropdownlist))}">  
            <h3 class="HeadingcontentParent" > 
                <lightning:select   aura:id="InputSelectAccount" name ="select" >
                    <option value="All">All</option>
                    <option value="{!v.accountId}">{!v.accountName}</option>
                    <aura:iteration items="{!v.Accountdropdownlist}" var="acc">
                        <option value="{!acc.key}" text="{!acc.value}"></option>
                    </aura:iteration>
                </lightning:select></h3>
            <div Style="margin-left: 1%; display: inline-block;font-size: 12px;">
                <lightning:button class="btn_Search" title="Search" label="Search"  onclick="{! c.getchilddetails }"/>
            </div>
        </aura:if>
        
        
        
        <!--aura:if isTrue="{!v.salesAgreementDashboard}"-->
        <!--
       <force:recordView recordId="a1W3L0000000TQz" type ="FULL"/>
        <lightning:recordForm
        recordId="a1W3L0000000TQz"
        objectApiName="ET_Sales_Agreement__c"
        layoutType="Full"
        mode="view" /> -->
        <div class="mybussinessdiv">
            <article class="slds-card">
                
                <!--a href="" onclick="{!c.handleSitesClickDashboard}">
                    <div class="slds-col">
                        <div class="form-box-row2" id="step-1">
                            <div class="leftsectiondiv">
                                <img src="{!$Resource.mysite_img}"/>
                            </div>
                            <div class="rightsectiondiv">
                                <div class="numberSize">
                                    {!v.activeSites}
                                </div>
                                <h3 class="form-title">My Sites</h3>
                            </div>
                        </div>
                    </div>
                </a-->
               <aura:if  isTrue="{!v.showTransAgreeTab}">
                <a href="" onclick="{!c.handleSalesAgreementClickDashboard}">
                    <div class="slds-col">
                        <div class="form-box-row2" id="step-1">
                            <div class="leftsectiondiv">
                                <!--img src="{!$Resource.activetrans_img}"/-->
                                <lightning:icon iconName="utility:truck" alternativeText="moneyBag" size="small" title="x-small size" style="margin-top:60%" />
                            </div>
                            <div class="rightsectiondiv">
                                <!--div class="numberSize">
                                    {!v.activeSalesAgreements}
                                </div--><br/>
                                <h3 class="form-title"><strong>Active Transportation Agreement</strong></h3>
                            </div>
                        </div>
                    </div>
                </a>
                </aura:if>
                <!--<a href="" onclick="{!c.handleActiveResourceClickDashboard}">
                     -->  
                <aura:if  isTrue="{!v.showMaintAgreeTab}">
                     
                        <a href="" onclick="{!c.handleMaintenanceAggrementClickDashboard}" >
                            <div class="slds-col">
                                <div class="form-box-row2" id="step-1">
                                    <div class="leftsectiondiv">
                                        <!--img src="{!$Resource.activemaintanance_img}"/-->
                                     <lightning:icon iconName="utility:maintenance_plan" alternativeText="moneyBag" size="small" title="x-small size" style="margin-top:60%" />

                                    </div>
                                    <div class="rightsectiondiv">
                                        <!--div class="numberSize">
                                            {!v.activeMaintenanceAgreements}
                                        </div--><br/>
                                        <h3 class="form-title"><strong>Active Maintanance Agreement</strong></h3>
                                    </div>
                                </div>
                            </div>
                        </a>
                   
                </aura:if>
                <aura:if  isTrue="{!v.showVariationOrdTab}">
                    <a href=""  onclick="{!c.handleOtherAgreementClickDashboard}">
                        <div class="slds-col">
                            <div class="form-box-row2" id="step-1">
                                <div class="leftsectiondiv ">
                                    <!--img src="{!$Resource.otheragreements_img}"/-->
                                    <lightning:icon iconName="utility:contract_doc" alternativeText="moneyBag" size="small" title="x-small size" style="margin-top:60%" />
                                </div>
                                <div class="rightsectiondiv">
                                    <!--div class="numberSize">
                                        {!v.activeotherAgreements}
                                    </div--><br/>
                                    <h3 class="form-title"><strong>Variation Order</strong></h3>
                                </div>
                            </div>
                        </div>
                    </a>
                </aura:if>
                <aura:if  isTrue="{!v.showInvoiceTab}">
                    <a href="" onclick="{!c.handleActiveInvoicesClickDashboard}">
                        
                        <div class="slds-col">
                            <div class="form-box-row2" id="step-1">
                                <div class="leftsectiondiv">
                                    <!--img src="{!$Resource.unpaidinvoice_img}"/-->
                                    <lightning:icon iconName="utility:contract_payment" alternativeText="moneyBag" size="small" title="x-small size" style="margin-top:60%" />
                                </div>
                                
                                <div class="rightsectiondiv">
                                    <!--div class="numberSize">
                                        {!v.activeInvoices} 
                                    </div--><br/>
                                    <h3 class="form-title"><strong>Invoices</strong></h3> 
                                </div>
                            </div>
                        </div>
                    </a>
                      
                   
                </aura:if>
                <aura:if isTrue="{!v.showTrafficFineTab}">
                    <a href="" onclick="{!c.trafficFinesHandler}">
                        
                        <div class="slds-col">
                            <div class="form-box-row2" id="step-1">
                                <div class="leftsectiondiv ">
                                    <!--img src="{!$Resource.otheragreements_img}"/-->
                                    <lightning:icon iconName="utility:moneybag" alternativeText="moneyBag" size="small" title="x-small size" style="margin-top:60%" />
                                    
                                </div>
                                <div class="rightsectiondiv">
                                    <!--div class="numberSize">
                                        {!v.trafficFineCount}
                                    </div--><br/>
                                    <h3 class="form-title"><strong>Traffic Fines</strong></h3>
                                </div>
                            </div>
                        </div>
                        
                    </a>
                </aura:if> 
                
                <aura:if  isTrue="{!v.showHseInfoTab}">
                    <a href=""  onclick="{!c.handleHSEScoreClick}">
                        <div class="slds-col">
                            <div class="form-box-row2" id="step-1">
                                <div class="leftsectiondiv ">
                                    <!--img src="{!$Resource.Happy_Smile_img}"/-->
                                    <lightning:icon iconName="utility:emoji" alternativeText="moneyBag" size="small" title="x-small size" style="margin-top:60%" />
                                    
                                </div>
                                <div class="rightsectiondiv">
                                    <!--div class="numberSize" style="visibility: hidden;">
                                        0
                                    </div--><br/>
                                    
                                    <h3 class="form-title"><strong>HSE Info</strong></h3>
                                </div>
                            </div>
                        </div>
                    </a>
                </aura:if>
                <aura:if  isTrue="{!v.showVisitsTab}">
                    <a href=""  onclick="{!c.showAccVisitsSection}">
                        <div class="slds-col">
                            <div class="form-box-row2" id="step-1">
                                <div class="leftsectiondiv ">
                                    <!--img src="{!$Resource.Happy_Smile_img}"/-->
                                    <lightning:icon iconName="utility:people" alternativeText="People" size="small" title="x-small size" style="margin-top:60%" />
                                </div>
                                <div class="rightsectiondiv">
                                    <!--div class="numberSize">
                                        {!v.noOfVisits}
                                    </div--><br/>
                                    <h3 class="form-title"><strong>Visits</strong></h3>
                                </div>
                            </div>
                        </div>
                    </a>
                </aura:if>
                <aura:if  isTrue="{!v.showAccidentHisTab}">
                    <a href=""  onclick="{!c.showVehAccidentSection}">
                        <div class="slds-col">
                            <div class="form-box-row2" id="step-1">
                                <div class="leftsectiondiv ">
                                    
                                    <lightning:icon iconName="utility:travel_and_places" size="small" title="x-small size" style="margin-top:60%" />
                                </div>
                                <div class="rightsectiondiv">
                                    <!--div class="numberSize">
                                        {!v.noOfAccidents}
                                    </div--><br/>
                                    <h3 class="form-title"><strong>Accident History</strong></h3>
                                </div>
                            </div>
                        </div>
                    </a>
                </aura:if>
                <aura:if isTrue="{!v.showSerReqTab}">
                    <a href=""  onclick="{!c.handleServicReqClick}">
                        <div class="slds-col">
                            <div class="form-box-row2" id="step-1">
                                <div class="leftsectiondiv ">
                                    <!--img src="{!$Resource.Happy_Smile_img}"/-->
                                    <lightning:icon iconName="utility:custom_apps" alternativeText="moneyBag" size="small" title="x-small size" style="margin-top:60%" />
                                    
                                </div>
                                <div class="rightsectiondiv">
                                   <!-- <div class="numberSize" style="visibility: hidden;">
                                        0  {!v.noOfFleetReq}
                                    </div>     --><br/>                                                                 
                                    <h3 class="form-title"><strong>Service Requests</strong></h3>
                                </div>
                            </div>
                        </div>
                    </a>
                </aura:if>
                
                <aura:if  isTrue="{!v.showDashboardTab}">
                    <a href="" onclick="{!c.openViewDashboard}">
                        
                        <div class="slds-col">
                            <div class="form-box-row2" id="step-1">
                                <div class="leftsectiondiv">
                                    <lightning:icon iconName="utility:agent_session" size="small" style="margin-top:60%" /> <!--img src="{!$Resource.unpaidinvoice_img}"/-->
                                </div>
                                <div class="rightsectiondiv">
                                    <!--div class="numberSize" style="visibility: hidden;">
                                        0
                                    </div--><br/>
                                    <h3 class="form-title"><strong>Dashboard</strong></h3> 
                                </div>
                            </div>
                        </div>
                    </a>
                </aura:if> 
                
            </article>
            <aura:if isTrue="{!v.isTrafficFines}"> 
                
                <div class="slds-grid slds-gutters ">
                    <div class="slds-col maincantentdiv" style="padding-top:0px">
                        
                        <div style="padding:0px" class="serchboxtab">
                            <aura:if isTrue="{!not(empty(v.trafficFineList))}">  
                                <lightning:input type="search"
                                                 name="searchKey" value="{!v.searchText}" 
                                                 aura:id="searchKey"  oncommit="{!c.searchTrafficFines}" onchange="{!c.searchTrafficFines}" autocomplete="off" 
                                                 placeholder="Search Traffic Fines" />
                            </aura:if>
                        </div>
                        <div class="tableshow">
                            <h3 class="Headingcontent">Traffic Fines</h3>
                            <div class="tableClass2">
                                <table class="slds-table slds-table_bordered " width="100%">
                                    <thead>
                                        <tr class="slds-line-height_reset">
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Ref No.">Ref No.
                                                </div>
                                            </th>
                                            
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Vehicle">Plate Number
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Fine">Fine
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Status">Status
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Created Date">Ticket Date
                                                </div>
                                            </th>
                                            
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Created Date">Reason
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <aura:if isTrue="{!not(empty(v.trafficFineFilterList))}"> 
                                        <tbody>
                                            
                                            <aura:iteration items="{!v.trafficFineFilterList}" 
                                                            var="tf"
                                                            indexVar="key">
                                                <tr class="slds-hint-parent">
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        {!key + 1}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!tf.Name}                                                </td>
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        <a id="{!tf.Assigned_Vehicle__c}" href=""
                                                           onclick="{!c.handleAssignedVehiclesClickNew}">
                                                            {!tf.Assigned_Vehicle__r.Plate_Number__c} 
                                                        </a>
                                                    </td>                                                    
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedNumber style="currency" value="{!tf.Fine_Amount__c}" currencyCode="AED"/> 
                                                    </td>
                                                    <!--td style="word-wrap: break-word;">
                                                    {!salesAgreement.value}
                                                </td-->
                                                    <td style="word-wrap: break-word;">
                                                        
                                                        <aura:if isTrue="{!tf.Status__c =='Completed'}">
                                                            Paid
                                                            <aura:set attribute="else">
                                                                Not Paid
                                                            </aura:set>
                                                        </aura:if>
                                                        
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedDateTime value="{!tf.Ticket_Date__c}"/>
                                                        
                                                    </td>
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        {!tf.Reason__c} 
                                                    </td>
                                                    
                                                </tr>
                                                
                                            </aura:iteration>
                                            
                                            
                                        </tbody>
                                        
                                    </aura:if>
                                </table>
                                
                                <aura:if isTrue="{!empty(v.trafficFineList)}">
                                    <div style="margin: 39px;" class="slds-align_absolute-center">Conguratulations you don't have any fines.</div>
                                </aura:if>
                                <aura:if isTrue="{!empty(v.trafficFineFilterList) &amp;&amp; !empty(v.trafficFineList)}">
                                    <div style="margin: 39px;" class="slds-align_absolute-center">We don't have any fines with search keyword.</div>
                                </aura:if>
                            </div>
                        </div>
                    </div>
                </div>
            </aura:if>
            
            <aura:if isTrue="{!v.salesAgreement}">            
                <div class="slds-grid slds-gutters ">
                    <div class="slds-col maincantentdiv" style="padding-top:0px">
                        <aura:if isTrue="{!v.poList.length>0}"> 
                            <div style="padding:0px" class="serchboxtab">
                                <lightning:input type="search"
                                                 name="searchKey" value="{!v.searchText}" 
                                                 aura:id="searchKey"  oncommit="{!c.searchAgreements}" onchange="{!c.searchAgreements}"
                                                 placeholder="Search Agreement" />
                            </div>
                        </aura:if>
                        <div class="tableshow">
                            <h3 class="Headingcontent">Active Sales Agreements</h3>
                            <div class="tableClass2">
                                <table class="slds-table slds-table_bordered " width="100%">
                                    <thead>
                                        <tr class="slds-line-height_reset">
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Sales Agreement Name">Po
                                                </div>
                                            </th>
                                            <!--th class="" scope="col">
                                        <div class="slds-truncate" title="Status">Count
                                        </div>
                                    </th-->
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Status">No. Of Resources
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Status">No. Of Vehicles
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Status">Account Manager
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Status">Action
                                                </div>
                                            </th>
                                            
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                        <aura:iteration items="{!v.salesAgreeFilterList}" 
                                                        var="salesAgreement"
                                                        indexVar="key">
                                            <tr class="slds-hint-parent">
                                                
                                                <td style="word-wrap: break-word;">
                                                    {!key + 1}
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    
                                                    <a id="{!salesAgreement.Id}" href=""
                                                       onclick="{!c.handleSalesAgreementClickNew}">
                                                        {!salesAgreement.Customer_PO_No__c}
                                                    </a>
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    <a id="{!salesAgreement.Id}" data-filename="Fixed"  href=""
                                                       onclick="{!c.showResourceListHandler}">
                                                        <aura:if isTrue="{!salesAgreement.Associated_Resources__r.length == null}">
                                                            0
                                                            <aura:set attribute="else">
                                                                {!salesAgreement.Associated_Resources__r.length}
                                                            </aura:set>
                                                        </aura:if>
                                                    </a>
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    <a id="{!salesAgreement.Id}" data-filename="Fixed" href=""
                                                       onclick="{!c.showVehicleListHandler}">
                                                        <aura:if isTrue="{!salesAgreement.Associated_Vehicles__r.length == null}">
                                                            0
                                                            <aura:set attribute="else">
                                                                {!salesAgreement.Associated_Vehicles__r.length}
                                                            </aura:set>
                                                        </aura:if>
                                                    </a>
                                                </td>
                                                <!--td style="word-wrap: break-word;">
                                                    {!salesAgreement.value}
                                                </td-->
                                                <td style="word-wrap: break-word;">
                                                    {!v.businessWrapper.accManager}
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    
                                                    
                                                    <lightning:buttonIcon iconName="utility:threedots" variant="neutral"
                                                                          aura:id="more"
                                                                          onclick="{!c.openMoreActionWindow}" class="btnsave" 
                                                                          value="{!salesAgreement.Customer_PO_No__c}"
                                                                          alternativeText="More Action"  size="large"  
                                                                          title="More Action" />
                                                    <span class="divider">|</span>
                                                    <lightning:buttonIcon iconName="utility:preview" variant="neutral"
                                                                          aura:id="more"  size="large" 
                                                                          onclick="{! c.showSalesAggs }"
                                                                          value="{!salesAgreement.Customer_PO_No__c}" class="btnsave"  
                                                                          alternativeText="View" 
                                                                          title="View" />
                                                    
                                                </td>
                                            </tr>
                                            
                                        </aura:iteration>
                                    </tbody>
                                </table>
                                <aura:if isTrue="{!empty(v.salesAgreeFilterList)}">
                                    <div style="margin: 39px;" class="slds-align_absolute-center">We don't find any active sales agreements.</div>
                                </aura:if>
                            </div>
                        </div>
                    </div>
                </div>
                
                
                <aura:if isTrue="{!v.isSalesAggs}">
                    <aura:if isTrue="{!v.isSalesAggs}">
                        <div class="slds-grid slds-gutters viewmore_agree">
                            <aura:if isTrue="{!v.cntList.length>0}">
                                <div class="slds-col">
                                    <table class="slds-table slds-table_bordered " width="100%">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <!--th class="" scope="col">
                                        <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                    </th-->
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sales Agreement Name">Month
                                                    </div>
                                                </th>
                                                <!--  <aura:if isTrue="{!notequals(v.accountId,'0012z000002vb5WAAQ')}">  -->
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Status">No. Of Vehicles
                                                    </div>
                                                </th>
                                                <!--   </aura:if>   -->
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Account Name">No. of Resources</div>
                                                </th >
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Contract Start Date">No. of Work Orders</div>
                                                </th>
                                                <!-- CHECK IF IT IS ADNOC-->
                                                <aura:if  isTrue="{!v.isADNOC}">
                                                    <th class="" scope="col">
                                                        <div class="slds-truncate" title="Status">Upload Time Sheet
                                                        </div>
                                                    </th>
                                                </aura:if>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            
                                            <aura:iteration items="{!v.cntList}" var="cnt"
                                                            indexVar="index">
                                                <tr class="slds-hint-parent">
                                                    
                                                    <!--td style="word-wrap: break-word;">
                                                    {!index + 1}
                                                </td-->
                                                    <td style="word-wrap: break-word;height:50px;"   > 
                                                        {!v.currentDate} - {!cnt.monthNo}
                                                        
                                                    </td>
                                                    <!--     <aura:if isTrue="{!notequals(v.accountId,'0012z000002vb5WAAQ')}">   -->
                                                    <td style="word-wrap: break-word;height:50px;"  >
                                                        <a id="{!cnt.monthNo}" href=""
                                                           onclick="{!c.handleVehicleCount}">
                                                            {!cnt.vehicleCount}
                                                        </a>
                                                        
                                                    </td>
                                                    <!--  </aura:if> -->
                                                    <td style="word-wrap: break-word;height:50px;"  >
                                                        <a id="{!cnt.monthNo}" href=""
                                                           onclick="{!c.handleResourceCount}">
                                                            {!cnt.resourceCount}
                                                        </a>
                                                        
                                                    </td>
                                                    <td style="word-wrap: break-word;height:50px;"   >
                                                        {!cnt.woCount}
                                                    </td>
                                                    <!-- upload is only available for ADNOC Partner Community -->
                                                    
                                                    <aura:if  isTrue="{!v.isADNOC}">
                                                        <td style="word-wrap: break-word;">
                                                            <lightning:button  onclick="{! c.openUploadPopup }"
                                                                              label="Upload"
                                                                              value="{!cnt.monthNo}"
                                                                              class="btnsorticon"/>
                                                            <lightning:button  onclick="{! c.openViewPopup }"
                                                                              label="View"
                                                                              value="{!cnt.monthNo}"
                                                                              class="btnsorticon"/>
                                                            
                                                            <!-- Upload end-->
                                                            <aura:if  isTrue="{!v.isUpload}" > 
                                                                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open slds-modal_small">
                                                                    <div class="slds-modal__container animated slideInUp">
                                                                        <!-- ###### MODAL BOX HEADER Start ######-->
                                                                        <header class="slds-modal__header">
                                                                            <!--  <lightning:buttonIcon iconName="utility:close"
                                                                                              onclick="{! c.closeUploadModel }"
                                                                                              alternativeText="close"
                                                                                              variant="bare-inverse"
                                                                                              class="slds-modal__close"/> -->
                                                                            <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Upload Timesheet</h2>
                                                                            
                                                                        </header>
                                                                        <!--###### MODAL BOX BODY Part Start######-->
                                                                        <div class="slds-modal__content " id="modal-content-id-1">
                                                                            <div class="slds-modal__body" aura:id='mainDiv'>
                                                                                
                                                                                <table>
                                                                                    <tr>
                                                                                        <td align="left" width="40%">
                                                                                            <Div class="noteClass">  
                                                                                                1.You can upload max 10 Files at a time.<br/>
                                                                                                2.The maximum file size you can upload is 2 GB.<br/><br/>
                                                                                            </Div>
                                                                                            <lightning:fileUpload label="Upload"
                                                                                                                  name="fileUploader"
                                                                                                                  multiple="true"
                                                                                                                  disabled="false"
                                                                                                                  recordId="{!v.currentaccountId}"
                                                                                                                  onuploadfinished="{!c.handleUploadFinished}" class="uploadbtn" style="text-align:left;"/>
                                                                                            <br/>  
                                                                                        </td>
                                                                                        <td align="center" width="20%">
                                                                                            <span style="font-size:20px;">OR</span>
                                                                                        </td>
                                                                                        <td width="40%" style="vertical-align:top;">
                                                                                            <lightning:input label =" Upload Link :" type="text" value="{!v.timesheetURL}"/>
                                                                                        </td>
                                                                                    </tr>
                                                                                </table>
                                                                            </div>
                                                                        </div>   
                                                                        
                                                                        <!--###### MODAL BOX FOOTER Part Start ######-->
                                                                        <footer class="slds-modal__footer">
                                                                            <lightning:button variant="neutral" 
                                                                                              label="Upload Timesheet Link"
                                                                                              title="Upload Timesheet Link"
                                                                                              onclick="{! c.uploadTimesheetURL}"  class="btncancel"/>
                                                                            <lightning:button variant="neutral" 
                                                                                              label="Cancel"
                                                                                              title="Close"
                                                                                              onclick="{! c.closeUploadModel }" class="btncancel"/>
                                                                        </footer>
                                                                    </div>
                                                                </section>
                                                                <div class="slds-backdrop slds-backdrop_open"></div>
                                                            </aura:if>
                                                            
                                                            <aura:if isTrue="{!v.viewFile}" > 
                                                                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open slds-modal_small">
                                                                    <div class="slds-modal__container animated slideInUp">
                                                                        <!-- ###### MODAL BOX HEADER Start ######-->
                                                                        <header class="slds-modal__header">
                                                                            <!--  <lightning:buttonIcon iconName="utility:close"
                                                                                              onclick="{! c.closeViewPopup }"
                                                                                              alternativeText="close"
                                                                                              variant="bare-inverse"
                                                                                              class="slds-modal__close"/> -->
                                                                            <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">View Timesheet</h2>
                                                                            
                                                                        </header>
                                                                        <!--###### MODAL BOX BODY Part Start######-->
                                                                        <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                                                            <div class="slds-modal__body" aura:id='mainDiv'> 
                                                                                <div class="slds-grid slds-gutters">
                                                                                    <aura:if  isTrue="{!v.selectedDocIds.length>0}" > 
                                                                                        <aura:iteration items="{!v.selectedDocIds}" var="item">
                                                                                            <div class="fileClass">
                                                                                                <lightning:fileCard fileId="{!item.Doc_Id__c}" description="{!item.File_Name__c}"/><br/>
                                                                                                <lightning:buttonIcon 
                                                                                                                      iconName="utility:delete" 
                                                                                                                      variant="bare"
                                                                                                                      onclick="{! c.handleDeleteClick }"
                                                                                                                      name="{!item.Doc_Id__c}"
                                                                                                                      alternativeText="delete"
                                                                                                                      title="delete" />  
                                                                                            </div>
                                                                                        </aura:iteration>
                                                                                        
                                                                                        <aura:set attribute="else">
                                                                                            <aura:if isTrue="{!v.timesheetURL !=''}">
                                                                                                <a href="{!v.timesheetURL}" target="_blank" style="font-size:16px;">
                                                                                                    {!v.timesheetURL}</a>
                                                                                                <aura:set attribute="else">
                                                                                                    No Time Sheet Available
                                                                                                </aura:set>
                                                                                            </aura:if>
                                                                                        </aura:set>
                                                                                    </aura:if>
                                                                                </div>
                                                                            </div> 
                                                                        </div> 
                                                                        <!--###### MODAL BOX FOOTER Part Start ######-->
                                                                        <footer class="slds-modal__footer">
                                                                            <lightning:button variant="brand" 
                                                                                              label="Cancel"
                                                                                              title="Close"
                                                                                              onclick="{! c.closeViewPopup }" class="btncancel"/>
                                                                        </footer>
                                                                    </div>
                                                                </section>
                                                                <div class="slds-backdrop slds-backdrop_open"></div>
                                                            </aura:if>
                                                        </td>
                                                    </aura:if>
                                                </tr>
                                                
                                            </aura:iteration>
                                        </tbody>
                                    </table>
                                </div>
                            </aura:if>
                            <!--aura:if isTrue="{!v.resourceCount.length>0}"-->
                            <!--div class="slds-col" style=" margin-left: -1px;">
                            <table class="slds-table slds-table_bordered " width="100%">
                                <thead>
                                    <tr class="slds-line-height_reset">
                                        
                                         
                                        <th class="" scope="col">
                                            <div class="slds-truncate" title="Status">No. Of Resources
                                            </div>
                                        </th>
                                        <th class="" scope="col">
                                            <div class="slds-truncate" title="Status">Upload Time Sheet
                                            </div>
                                        </th>
                                        
                                    </tr>
                                </thead>
                                <tbody>
                                    <aura:iteration items="{!v.resourceCount}" var="rec"
                                                    indexVar="index">
                                         <td style="word-wrap: break-word;height:50px;">
                                                <a id="{!rec.key}" href=""
                                                   onclick="{!c.handleResourceCount}">
                                                    {!rec.value}
                                                </a>
                                            </td>
                                            <td style="word-wrap: break-word;height:50px;">
                                                <lightning:fileUpload label=""
                                                                      name="fileUploader"
                                                                      multiple="false"
                                                                      disabled="false"
                                                                      recordId="0012z000002p5bJAAQ"
                                                                      onuploadfinished="{!c.handleUploadFinished}" class="uploadbtn"/>
                                            </td>
                                        </tr>
                                        
                                    </aura:iteration>
                                </tbody>
                            </table>
                        </div-->
                            <!--/aura:if-->
                        </div>
                    </aura:if>
                </aura:if>
            </aura:if>
            <!-- Opportunity table-->
            <aura:if isTrue="{!v.salesAgreement &amp;&amp; not(empty(v.opportunityList))}">            
                <div class="slds-grid slds-gutters ">
                    <div class="slds-col maincantentdiv" style="padding-top:0px">
                        <div class="tableshow">
                            <h3 class="Headingcontent">Opportunity</h3>
                            <div class="tableClass2">
                                <table class="slds-table slds-table_bordered " width="100%">
                                    <thead>
                                        <tr class="slds-line-height_reset">
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Opportunity Number">Opportunity Name
                                                </div>
                                            </th>
                                            
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Status">Status
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Record Type">Type
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Created By">Created By
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Created Date">Created Date
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                        <aura:iteration items="{!v.opportunityList}" 
                                                        var="opp"
                                                        indexVar="key">
                                            <tr class="slds-hint-parent">
                                                
                                                <td style="word-wrap: break-word;">
                                                    {!key + 1}
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    {!opp.ETSALES_Opportunity_Number__c}                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    {!opp.StageName}
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    {!opp.RecordType.Name}
                                                </td>
                                                <!--td style="word-wrap: break-word;">
                                                    {!salesAgreement.value}
                                                </td-->
                                                <td style="word-wrap: break-word;">
                                                    
                                                    {!opp.CreatedBy.Name}
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    <lightning:formattedDateTime value="{!opp.CreatedDate}"/>
                                                    
                                                </td>
                                                
                                            </tr>
                                            
                                        </aura:iteration>
                                    </tbody>
                                </table>
                                
                            </div>
                        </div>
                    </div>
                </div>
                
            </aura:if>
            
            
            <aura:if isTrue="{!v.otherAgreement}">            
                <div class="slds-grid slds-gutters ">
                    <div class="slds-col maincantentdiv" style="padding-top:0px">
                        <aura:if isTrue="{!v.AllCalloutList.length>0}"> 
                            <div style="padding:0px" class="serchboxtab">
                                <lightning:input type="search"
                                                 name="searchKey" value="{!v.searchText}" 
                                                 aura:id="searchKey" oncommit="{!c.searchCallOuts}" onchange="{!c.searchCallOuts}"  
                                                 placeholder="Search Callout" />
                            </div>
                        </aura:if>
                        <div class="tableshow">
                            <h3 class="Headingcontent">Active Callouts</h3>
                            <div class="tableClass2">
                                <table class="slds-table slds-table_bordered " width="100%">
                                    <thead>
                                        <tr class="slds-line-height_reset">
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Sales Agreement Name">Po
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Status">No.of Resources
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Status">No.of Vehicles
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Status">Account Manager
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Status">Action
                                                </div>
                                            </th>
                                            
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                        <aura:iteration items="{!v.currentCalloutList}" 
                                                        var="otherAgreement"
                                                        indexVar="key">
                                            <tr class="slds-hint-parent">
                                                
                                                <td style="word-wrap: break-word;">
                                                    {!key + 1}
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    
                                                    
                                                    <a id="{!otherAgreement.Id}" href=""
                                                       onclick="{!c.handleSalesAgreementClickNew}">
                                                        {!otherAgreement.Customer_PO_No__c}
                                                    </a>
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    <a id="{!otherAgreement.Id}"  href=""
                                                       onclick="{!c.showResourceListHandler}">
                                                        
                                                        
                                                        <aura:if isTrue="{!otherAgreement.Associated_Resources__r.length == null}">
                                                            0
                                                            <aura:set attribute="else">
                                                                {!otherAgreement.Associated_Resources__r.length}
                                                            </aura:set>
                                                        </aura:if>
                                                    </a>
                                                    
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    <a id="{!otherAgreement.Id}"  href=""
                                                       onclick="{!c.showVehicleListHandler}">
                                                        
                                                        <aura:if isTrue="{!otherAgreement.Associated_Vehicles__r.length == null}">
                                                            0
                                                            <aura:set attribute="else">
                                                                {!otherAgreement.Associated_Vehicles__r.length}
                                                            </aura:set>
                                                        </aura:if>
                                                        
                                                    </a>
                                                    
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    {!v.businessWrapper.accManager}
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    
                                                    
                                                    <lightning:buttonIcon iconName="utility:threedots" variant="neutral"
                                                                          aura:id="more"
                                                                          onclick="{!c.openMoreActionWindow}" class="btnsave" 
                                                                          value="{!otherAgreement.Customer_PO_No__c}"
                                                                          alternativeText="More Action"  size="large"  
                                                                          title="More Action" />
                                                    <span class="divider">|</span>
                                                    <lightning:buttonIcon iconName="utility:preview" variant="neutral"
                                                                          aura:id="more"  size="large" 
                                                                          onclick="{! c.showOtherAggs }"
                                                                          value="{!otherAgreement.Customer_PO_No__c}" class="btnsave"  
                                                                          alternativeText="View" 
                                                                          title="View" />
                                                    
                                                </td>
                                            </tr>
                                            
                                        </aura:iteration>
                                    </tbody>
                                </table>
                                <aura:if isTrue="{!empty(v.currentCalloutList)}">
                                    <div style="margin: 39px;" class="slds-align_absolute-center">We don't have any active callouts with search keyword.</div>
                                </aura:if>
                            </div>
                        </div>
                    </div>
                </div>
                <aura:if isTrue="{!v.isOtherAggs}">
                    <aura:if isTrue="{!v.isOtherAggs}">
                        <div class="slds-grid slds-gutters viewmore_agree">
                            <aura:if isTrue="{!v.cntList2.length>0}">
                                <div class="slds-col">
                                    <table class="slds-table slds-table_bordered " width="100%">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sales Agreement Name">Month
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Status">No. Of Vehicles
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Account Name">No. of Resources</div>
                                                </th >
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Contract Start Date">No. of Work Orders</div>
                                                </th>
                                                <!-- CHECK IF IT IS ADNOC-->
                                                <aura:if  isTrue="{!v.isADNOC}">
                                                    <th class="" scope="col">
                                                        <div class="slds-truncate" title="Status">Upload Time Sheet
                                                        </div>
                                                    </th>
                                                </aura:if>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            
                                            <aura:iteration items="{!v.cntList2}" var="cnt"
                                                            indexVar="index">
                                                <tr class="slds-hint-parent">
                                                    <td style="word-wrap: break-word;height:50px;"   > 
                                                        {!v.currentDate} - {!cnt.monthNo}
                                                        
                                                    </td>
                                                    <td style="word-wrap: break-word;height:50px;"  >
                                                        <a id="{!cnt.monthNo}" href=""
                                                           onclick="{!c.handleVehicleCount}">
                                                            {!cnt.vehicleCount}
                                                        </a>
                                                        
                                                    </td>
                                                    <td style="word-wrap: break-word;height:50px;"  >
                                                        <a id="{!cnt.monthNo}" href=""
                                                           onclick="{!c.handleResourceCount}">
                                                            {!cnt.resourceCount}
                                                        </a>
                                                        
                                                    </td>
                                                    <td style="word-wrap: break-word;height:50px;"   >
                                                        {!cnt.woCount}
                                                    </td>
                                                    
                                                    <aura:if  isTrue="{!v.isADNOC}">
                                                        <td style="word-wrap: break-word;">
                                                            <lightning:button  onclick="{! c.openUploadPopup }"
                                                                              label="Upload"
                                                                              value="{!cnt.monthNo}"
                                                                              class="btnsorticon"/>
                                                            <lightning:button  onclick="{! c.openViewPopup }"
                                                                              label="View"
                                                                              value="{!cnt.monthNo}"
                                                                              class="btnsorticon"/>
                                                            
                                                            <!-- Upload end-->
                                                            <aura:if  isTrue="{!v.isUpload}" > 
                                                                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open slds-modal_small">
                                                                    <div class="slds-modal__container animated slideInUp">
                                                                        <!-- ###### MODAL BOX HEADER Start ######-->
                                                                        <header class="slds-modal__header">
                                                                            <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Upload Timesheet</h2>
                                                                            
                                                                        </header>
                                                                        <!--###### MODAL BOX BODY Part Start######-->
                                                                        <div class="slds-modal__content " id="modal-content-id-1">
                                                                            <div class="slds-modal__body" aura:id='mainDiv'>
                                                                                
                                                                                <table>
                                                                                    <tr>
                                                                                        <td align="left" width="40%">
                                                                                            <Div class="noteClass">  
                                                                                                1.You can upload max 10 Files at a time.<br/>
                                                                                                2.The maximum file size you can upload is 2 GB.<br/><br/>
                                                                                            </Div>
                                                                                            <lightning:fileUpload label="Upload"
                                                                                                                  name="fileUploader"
                                                                                                                  multiple="true"
                                                                                                                  disabled="false"
                                                                                                                  recordId="{!v.currentaccountId}"
                                                                                                                  onuploadfinished="{!c.handleUploadFinished}" class="uploadbtn" style="text-align:left;"/>
                                                                                            <br/>  
                                                                                        </td>
                                                                                        <td align="center" width="20%">
                                                                                            <span style="font-size:20px;">OR</span>
                                                                                        </td>
                                                                                        <td width="40%" style="vertical-align:top;">
                                                                                            <lightning:input label =" Upload Link :" type="text" value="{!v.timesheetURL}"/>
                                                                                        </td>
                                                                                    </tr>
                                                                                </table>
                                                                            </div>
                                                                        </div>   
                                                                        
                                                                        <!--###### MODAL BOX FOOTER Part Start ######-->
                                                                        <footer class="slds-modal__footer">
                                                                            <lightning:button variant="neutral" 
                                                                                              label="Upload Timesheet Link"
                                                                                              title="Upload Timesheet Link"
                                                                                              onclick="{! c.uploadTimesheetURL}"  class="btncancel"/>
                                                                            <lightning:button variant="neutral" 
                                                                                              label="Cancel"
                                                                                              title="Close"
                                                                                              onclick="{! c.closeUploadModel }" class="btncancel"/>
                                                                        </footer>
                                                                    </div>
                                                                </section>
                                                                <div class="slds-backdrop slds-backdrop_open"></div>
                                                            </aura:if>
                                                            
                                                            <aura:if isTrue="{!v.viewFile}" > 
                                                                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open slds-modal_small">
                                                                    <div class="slds-modal__container animated slideInUp">
                                                                        <!-- ###### MODAL BOX HEADER Start ######-->
                                                                        <header class="slds-modal__header">
                                                                            <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">View Timesheet</h2>
                                                                            
                                                                        </header>
                                                                        <!--###### MODAL BOX BODY Part Start######-->
                                                                        <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                                                            <div class="slds-modal__body" aura:id='mainDiv'> 
                                                                                <div class="slds-grid slds-gutters">
                                                                                    <aura:if  isTrue="{!v.selectedDocIds.length>0}" > 
                                                                                        <aura:iteration items="{!v.selectedDocIds}" var="item">
                                                                                            <div class="fileClass">
                                                                                                <lightning:fileCard fileId="{!item.Doc_Id__c}" description="{!item.File_Name__c}"/><br/>
                                                                                                <lightning:buttonIcon 
                                                                                                                      iconName="utility:delete" 
                                                                                                                      variant="bare"
                                                                                                                      onclick="{! c.handleDeleteClick }"
                                                                                                                      name="{!item.Doc_Id__c}"
                                                                                                                      alternativeText="delete"
                                                                                                                      title="delete" />  
                                                                                            </div>
                                                                                        </aura:iteration>
                                                                                        
                                                                                        <aura:set attribute="else">
                                                                                            <aura:if isTrue="{!v.timesheetURL !=''}">
                                                                                                <a href="{!v.timesheetURL}" target="_blank" style="font-size:16px;">
                                                                                                    {!v.timesheetURL}</a>
                                                                                                <aura:set attribute="else">
                                                                                                    No Time Sheet Available
                                                                                                </aura:set>
                                                                                            </aura:if>
                                                                                        </aura:set>
                                                                                    </aura:if>
                                                                                </div>
                                                                            </div> 
                                                                        </div> 
                                                                        <!--###### MODAL BOX FOOTER Part Start ######-->
                                                                        <footer class="slds-modal__footer">
                                                                            <lightning:button variant="brand" 
                                                                                              label="Cancel"
                                                                                              title="Close"
                                                                                              onclick="{! c.closeViewPopup }" class="btncancel"/>
                                                                        </footer>
                                                                    </div>
                                                                </section>
                                                                <div class="slds-backdrop slds-backdrop_open"></div>
                                                            </aura:if>
                                                        </td>
                                                    </aura:if>
                                                </tr>
                                                
                                            </aura:iteration>
                                        </tbody>
                                    </table>
                                </div>
                            </aura:if>
                        </div>
                    </aura:if>
                </aura:if>
            </aura:if>
            
            <!--Show Resources popup -->
            <aura:if isTrue="{!v.showResourceList}">
                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container">
                        <div class="modal-header slds-modal__header">
                            <h4 class="title slds-text-heading--medium"> Resources Details</h4>
                        </div>
                        <div class="mainDiv slds-scrollable" > 
                            
                            
                            <div  class="slds-modal__content">
                                
                                <div class="tableClass">
                                    <table class="slds-table slds-table_bordered " width="100%">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Emp Id">                                                          
                                                        Employee Id                                                            
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Emp name">
                                                        Employee Name
                                                    </div>
                                                    
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign Start Date"></div>
                                                    Assign Start Date
                                                    
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date"></div>
                                                    Assign End Date
                                                </th>
                                                <!--th class="" scope="col">
                                            <div class="slds-truncate" title="Contract End Date">Raise Complaint</div>
                                        </th-->
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <aura:iteration items="{!v.currentResourceVal}"
                                                            var="assignedResource" indexVar="index">
                                                <tr class="slds-hint-parent">
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        {!index + 1}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <a id="{!assignedResource.Id}" href=""
                                                           onclick="{!c.handleAssignedResourcesClickNew}">
                                                            {!assignedResource.Employee_ID__c}
                                                        </a>
                                                    </td>
                                                    <td style="word-wrap: break-word;">                                                            
                                                        {!assignedResource.Employee_Name__c}                                                            
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedDateTime value="{!assignedResource.Assign_Start_Date__c}"/>
                                                        
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedDateTime value="{!assignedResource.Assign_End_Date__c}"/>
                                                        
                                                    </td>
                                                    <!--td style="word-wrap: break-word;">
                                                        <lightning:button class="emmergencyButton" label="Raise Complaint" title="Raise Complaint"
                                                                          onclick="{!c.showCaseModal}" name="{!assignedResource.Id}" aura:id="{!assignedResource.Id}"/>
                                                    </td-->
                                                </tr>
                                                
                                            </aura:iteration>
                                        </tbody>
                                    </table>
                                </div>
                                
                            </div>
                            
                            <div class="modal-footer slds-modal__footer">
                                <lightning:button variant="brand" 
                                                  label="Close"
                                                  title="Close"
                                                  onclick="{!c.closeShowResourcesList}" class="btn_close" disabled=""/> 
                            </div>                    
                            
                        </div>               
                        
                        
                        
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </aura:if>
            
            <!-- show vehicle popup -->
            
            <aura:if isTrue="{!v.showVehicleList}">
                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container">
                        <div class="modal-header slds-modal__header">
                            <h4 class="title slds-text-heading--medium"> Vehicle Details</h4>
                        </div>
                        <div class="mainDiv slds-scrollable" > 
                            
                            
                            <div  class="slds-modal__content">
                                
                                <div class="tableClass">
                                    <table class="slds-table slds-table_bordered " width="100%">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Name">
                                                        
                                                        Name
                                                        
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Vehicle Number">
                                                        
                                                        Plate Number
                                                        
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="PlateSource">Plate Source
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="VehicleType">
                                                        
                                                        Vehicle Type
                                                        
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign Start Date">
                                                        
                                                        Assign Start Date
                                                        
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date">
                                                        
                                                        Assign End Date
                                                        
                                                    </div>
                                                </th>
                                                <!--th class="" scope="col">
                                            <div class="slds-truncate" title="Contract End Date">Raise Complaint</div>
                                        </th-->
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <aura:iteration items="{!v.currentVehiclesVal}" var="assignedVehicle"
                                                            indexVar="index">
                                                
                                                <tr class="slds-hint-parent">
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        {!index + 1}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <a id="{!assignedVehicle.Id}" href=""
                                                           onclick="{!c.handleAssignedVehiclesClickNew}">
                                                            {!assignedVehicle.Name}
                                                        </a>
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!assignedVehicle.Plate_Number__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!assignedVehicle.Plate_Source__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        
                                                        {!assignedVehicle.Vehicle_Type__c}
                                                        
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedDateTime value="{!assignedVehicle.Assign_Start_Date__c}"/>
                                                        
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedDateTime value="{!assignedVehicle.Assign_End_Date__c}"/>
                                                        
                                                    </td>
                                                    <!--td style="word-wrap: break-word;">
                                                        <lightning:button class="emmergencyButton" label="Raise Complaint" title="Raise Complaint"
                                                                          onclick="{!c.showCaseModal}" name="{!assignedVehicle.Id}" aura:id="{!assignedVehicle.Id}"/>
                                                    </td-->
                                                </tr>
                                                
                                            </aura:iteration>
                                        </tbody>
                                    </table>
                                </div>
                                
                            </div>
                            
                            <div class="modal-footer slds-modal__footer">
                                <lightning:button variant="brand" 
                                                  label="Close"
                                                  title="Close"
                                                  onclick="{!c.closeShowVehList}" class="btn_close" disabled=""/> 
                            </div>                    
                            
                        </div>               
                        
                        
                        
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </aura:if>
            
            <!-- Opportunity table-->
            <aura:if isTrue="{!v.otherAgreement &amp;&amp; not(empty(v.opportunityList))}">            
                <div class="slds-grid slds-gutters ">
                    <div class="slds-col maincantentdiv" style="padding-top:0px">
                        <div class="tableshow">
                            <h3 class="Headingcontent">Opportunity</h3>
                            <div class="tableClass2">
                                <table class="slds-table slds-table_bordered " width="100%">
                                    <thead>
                                        <tr class="slds-line-height_reset">
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Opportunity Number">Opportunity Name
                                                </div>
                                            </th>
                                            
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Status">Status
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Record Type">Type
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Created By">Created By
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Created Date">Created Date
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                        <aura:iteration items="{!v.opportunityList}" 
                                                        var="opp"
                                                        indexVar="key">
                                            <tr class="slds-hint-parent">
                                                
                                                <td style="word-wrap: break-word;">
                                                    {!key + 1}
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    {!opp.ETSALES_Opportunity_Number__c}                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    {!opp.StageName}
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    {!opp.RecordType.Name}
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    
                                                    {!opp.CreatedBy.Name}
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    <lightning:formattedDateTime value="{!opp.CreatedDate}"/>
                                                    
                                                </td>
                                                
                                            </tr>
                                            
                                        </aura:iteration>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
            </aura:if>
            <aura:if isTrue="{!v.maintenanceAgreement}">            
                <div class="slds-grid slds-gutters ">
                    <div class="slds-col maincantentdiv" style="padding-top:0px">
                        <div class="tableshow">
                            <h3 class="Headingcontent">Active Sales Agreements</h3>
                            <div class="tableClass2">
                                <table class="slds-table slds-table_bordered " width="100%">
                                    <thead>
                                        <tr class="slds-line-height_reset">
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Sales Agreement Name">Po
                                                </div>
                                            </th>
                                            
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Status">Account Manager
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Status">Action
                                                </div>
                                            </th>
                                            
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                        <aura:iteration items="{!v.maintenencePOList}" 
                                                        var="salesAgreement"
                                                        indexVar="key">
                                            <tr class="slds-hint-parent">
                                                
                                                <td style="word-wrap: break-word;">
                                                    {!key + 1}
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    {!salesAgreement.key}
                                                    
                                                </td>
                                                <!--td style="word-wrap: break-word;">
                                                    {!salesAgreement.value}
                                                </td-->
                                                <td style="word-wrap: break-word;">
                                                    {!v.businessWrapper.accManager}
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    
                                                    <lightning:buttonIcon iconName="utility:preview" variant="neutral"
                                                                          aura:id="more"  size="large" 
                                                                          onclick="{! c.showMaintenanceAggs }"
                                                                          value="{!salesAgreement.key}" class="btnsave"  
                                                                          alternativeText="View" 
                                                                          title="View" />
                                                    
                                                </td>
                                            </tr>
                                            
                                        </aura:iteration>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <aura:if isTrue="{!v.isMaintenanceAggs}">
                    <aura:if isTrue="{!v.isMaintenanceAggs}">
                        <div class="slds-grid slds-gutters viewmore_agree">
                            <aura:if isTrue="{!v.cntList1.length>0}">
                                <div class="slds-col">
                                    <table class="slds-table slds-table_bordered " width="100%">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sales Agreement Name">Month
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Status">No. Of Vehicles
                                                    </div>
                                                </th>
                                                <!--   </aura:if>   -->
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Account Name">No. of Work orders</div>
                                                </th >
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Contract Start Date">No. of Estimations</div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Contract Start Date">No. of Active Work Orders</div>
                                                </th>
                                                <!-- CHECK IF IT IS ADNOC-->
                                                <aura:if  isTrue="{!v.isADNOC}">
                                                    <th class="" scope="col">
                                                        <div class="slds-truncate" title="Status">Upload Time Sheet
                                                        </div>
                                                    </th>
                                                </aura:if>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            
                                            <aura:iteration items="{!v.cntList1}" var="cnt"
                                                            indexVar="index">
                                                <tr class="slds-hint-parent">
                                                    
                                                    <!--td style="word-wrap: break-word;">
                                                    {!index + 1}
                                                </td-->
                                                    <td style="word-wrap: break-word;height:50px;"   > 
                                                        {!v.currentDate} - {!cnt.monthNo}
                                                        
                                                    </td>
                                                    <td style="word-wrap: break-word;height:50px;"  >
                                                        <a id="{!cnt.monthNo}" href=""
                                                           onclick="{!c.handleMaintenanceVehicleCount}">
                                                            {!cnt.vehicleCount}
                                                        </a>
                                                        
                                                    </td>
                                                    <td style="word-wrap: break-word;height:50px;"  >
                                                        <a id="{!cnt.monthNo}" href=""
                                                           onclick="{!c.handleMaintenanceWoCount}">
                                                            {!cnt.woCount}
                                                        </a>
                                                    </td>
                                                    <td style="word-wrap: break-word;height:50px;"  >
                                                        <a id="{!cnt.monthNo}" href=""
                                                           onclick="{!c.handleEstimationCount}">
                                                            {!cnt.estimationCount}
                                                        </a>
                                                    </td>
                                                    <td style="word-wrap: break-word;height:50px;"  >
                                                        <a id="{!cnt.monthNo}" href=""
                                                           onclick="{!c.handleActiveMaintenanceWoCount}">
                                                            {!cnt.activeWOCount}
                                                        </a>
                                                    </td>
                                                    <!-- upload is only available for ADNOC Partner Community -->
                                                    
                                                    <aura:if  isTrue="{!v.isADNOC}">
                                                        <td style="word-wrap: break-word;">
                                                            <lightning:button  onclick="{! c.openUploadPopup }"
                                                                              label="Upload"
                                                                              value="{!cnt.monthNo}"
                                                                              class="btnsorticon"/>
                                                            <lightning:button  onclick="{! c.openViewPopup }"
                                                                              label="View"
                                                                              value="{!cnt.monthNo}"
                                                                              class="btnsorticon"/>
                                                            
                                                            <!-- Upload end-->
                                                            <aura:if  isTrue="{!v.isUpload}" > 
                                                                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open slds-modal_small">
                                                                    <div class="slds-modal__container animated slideInUp">
                                                                        <!-- ###### MODAL BOX HEADER Start ######-->
                                                                        <header class="slds-modal__header">
                                                                            <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Upload Timesheet</h2>
                                                                            
                                                                        </header>
                                                                        <!--###### MODAL BOX BODY Part Start######-->
                                                                        <div class="slds-modal__content " id="modal-content-id-1">
                                                                            <div class="slds-modal__body" aura:id='mainDiv'>
                                                                                
                                                                                <table>
                                                                                    <tr>
                                                                                        <td align="left" width="40%">
                                                                                            <Div class="noteClass">  
                                                                                                1.You can upload max 10 Files at a time.<br/>
                                                                                                2.The maximum file size you can upload is 2 GB.<br/><br/>
                                                                                            </Div>
                                                                                            <lightning:fileUpload label="Upload"
                                                                                                                  name="fileUploader"
                                                                                                                  multiple="true"
                                                                                                                  disabled="false"
                                                                                                                  recordId="{!v.currentaccountId}"
                                                                                                                  onuploadfinished="{!c.handleUploadFinished}" class="uploadbtn" style="text-align:left;"/>
                                                                                            <br/>  
                                                                                        </td>
                                                                                        <td align="center" width="20%">
                                                                                            <span style="font-size:20px;">OR</span>
                                                                                        </td>
                                                                                        <td width="40%" style="vertical-align:top;">
                                                                                            <lightning:input label =" Upload Link :" type="text" value="{!v.timesheetURL}"/>
                                                                                        </td>
                                                                                    </tr>
                                                                                </table>
                                                                            </div>
                                                                        </div>   
                                                                        
                                                                        <!--###### MODAL BOX FOOTER Part Start ######-->
                                                                        <footer class="slds-modal__footer">
                                                                            <lightning:button variant="neutral" 
                                                                                              label="Upload Timesheet Link"
                                                                                              title="Upload Timesheet Link"
                                                                                              onclick="{! c.uploadTimesheetURL}"  class="btncancel"/>
                                                                            <lightning:button variant="neutral" 
                                                                                              label="Cancel"
                                                                                              title="Close"
                                                                                              onclick="{! c.closeUploadModel }" class="btncancel"/>
                                                                        </footer>
                                                                    </div>
                                                                </section>
                                                                <div class="slds-backdrop slds-backdrop_open"></div>
                                                            </aura:if>
                                                            
                                                            <aura:if isTrue="{!v.viewFile}" > 
                                                                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open slds-modal_small">
                                                                    <div class="slds-modal__container animated slideInUp">
                                                                        <!-- ###### MODAL BOX HEADER Start ######-->
                                                                        <header class="slds-modal__header">
                                                                            <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">View Timesheet</h2>
                                                                            
                                                                        </header>
                                                                        <!--###### MODAL BOX BODY Part Start######-->
                                                                        <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                                                            <div class="slds-modal__body" aura:id='mainDiv'> 
                                                                                <div class="slds-grid slds-gutters">
                                                                                    <aura:if  isTrue="{!v.selectedDocIds.length>0}" > 
                                                                                        <aura:iteration items="{!v.selectedDocIds}" var="item">
                                                                                            <div class="fileClass">
                                                                                                <lightning:fileCard fileId="{!item.Doc_Id__c}" description="{!item.File_Name__c}"/><br/>
                                                                                                <lightning:buttonIcon 
                                                                                                                      iconName="utility:delete" 
                                                                                                                      variant="bare"
                                                                                                                      onclick="{! c.handleDeleteClick }"
                                                                                                                      name="{!item.Doc_Id__c}"
                                                                                                                      alternativeText="delete"
                                                                                                                      title="delete" />  
                                                                                            </div>
                                                                                        </aura:iteration>
                                                                                        
                                                                                        <aura:set attribute="else">
                                                                                            <aura:if isTrue="{!v.timesheetURL !=''}">
                                                                                                <a href="{!v.timesheetURL}" target="_blank" style="font-size:16px;">
                                                                                                    {!v.timesheetURL}</a>
                                                                                                <aura:set attribute="else">
                                                                                                    No Time Sheet Available
                                                                                                </aura:set>
                                                                                            </aura:if>
                                                                                        </aura:set>
                                                                                    </aura:if>
                                                                                </div>
                                                                            </div> 
                                                                        </div> 
                                                                        <!--###### MODAL BOX FOOTER Part Start ######-->
                                                                        <footer class="slds-modal__footer">
                                                                            <lightning:button variant="brand" 
                                                                                              label="Cancel"
                                                                                              title="Close"
                                                                                              onclick="{! c.closeViewPopup }" class="btncancel"/>
                                                                        </footer>
                                                                    </div>
                                                                </section>
                                                                <div class="slds-backdrop slds-backdrop_open"></div>
                                                            </aura:if>
                                                        </td>
                                                    </aura:if>
                                                </tr>
                                                
                                            </aura:iteration>
                                        </tbody>
                                    </table>
                                </div>
                            </aura:if>
                        </div>
                    </aura:if>
                </aura:if>
            </aura:if>
            <!-- Opportunity table-->
            <aura:if isTrue="{!v.maintenanceAgreement &amp;&amp; not(empty(v.opportunityList))}">            
                <div class="slds-grid slds-gutters ">
                    <div class="slds-col maincantentdiv" style="padding-top:0px">
                        <div class="tableshow">
                            <h3 class="Headingcontent">Opportunity</h3>
                            <div class="tableClass2">
                                <table class="slds-table slds-table_bordered " width="100%">
                                    <thead>
                                        <tr class="slds-line-height_reset">
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Opportunity Number">Opportunity Name
                                                </div>
                                            </th>
                                            
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Status">Status
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Record Type">Type
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Created By">Created By
                                                </div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Created Date">Created Date
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                        <aura:iteration items="{!v.opportunityList}" 
                                                        var="opp"
                                                        indexVar="key">
                                            <tr class="slds-hint-parent">
                                                
                                                <td style="word-wrap: break-word;">
                                                    {!key + 1}
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    {!opp.ETSALES_Opportunity_Number__c}                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    {!opp.StageName}
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    {!opp.RecordType.Name}
                                                </td>
                                                <!--td style="word-wrap: break-word;">
                                                    {!salesAgreement.value}
                                                </td-->
                                                <td style="word-wrap: break-word;">
                                                    
                                                    {!opp.CreatedBy.Name}
                                                </td>
                                                <td style="word-wrap: break-word;">
                                                    <lightning:formattedDateTime value="{!opp.CreatedDate}"/>
                                                    
                                                </td>
                                                
                                            </tr>
                                            
                                        </aura:iteration>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
            </aura:if>
            <aura:if isTrue="{!v.assignResources}">
                <div class="documentmain animated slideInDown">
                    <div class="slds-grid slds-gutters ">
                        <div class="slds-col maincantentdiv" style="padding-top:0px">
                            <div class="tableshow">
                                <h3 class="Headingcontent">Active Assigned Resources</h3>
                                <aura:if isTrue="{!v.resourceList.length>0}"> 
                                    <div style="padding:0px" class="serchboxtab">
                                        <lightning:input type="search"
                                                         name="searchKey" value="{!v.searchText}" 
                                                         aura:id="searchKey"  onkeyup="{!c.searchResources}" 
                                                         placeholder="Search Resources" />
                                    </div>
                                </aura:if>
                                <lightning:button class="downloadButton" label="Download" title="Download" 
                                                  onclick="{!c.downloadResources}"/>
                                <lightning:buttonIcon iconName="utility:download" variant="neutral" class="downloadicon"
                                                      aura:id="more1"
                                                      onclick="{!c.downloadResources}"   
                                                      alternativeText="Download"   
                                                      title="Download" />
                                <div class="tableClass">
                                    <table class="slds-table slds-table_bordered " width="100%">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assigened Resource Name">
                                                        <a onclick="{!c.handleSortResources}" Id="resName" style="color: #8f8888;"> 
                                                            Employee Id
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sales Agreement Name">
                                                        <a onclick="{!c.handleSortResources}" Id="resSgName" style="color: #8f8888;"> 
                                                            Contract Number
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign Start Date"></div>
                                                    <a onclick="{!c.handleSortResources}" Id="resStartDate" style="color: #8f8888;"> 
                                                        Assign Start Date
                                                    </a> 
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date"></div>
                                                    <a onclick="{!c.handleSortResources}" Id="resEndDate" style="color: #8f8888;"> 
                                                        Assign End Date
                                                    </a> 
                                                </th>
                                                <!--th class="" scope="col">
                                            <div class="slds-truncate" title="Contract End Date">Raise Complaint</div>
                                        </th-->
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <aura:iteration items="{!v.currentresourceList}"
                                                            var="assignedResource" indexVar="index">
                                                <tr class="slds-hint-parent">
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        {!index + 1}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <a id="{!assignedResource.Id}" href=""
                                                           onclick="{!c.handleAssignedResourcesClickNew}">
                                                            {!assignedResource.Name}
                                                        </a>
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <a id="{!assignedResource.Sales_Agreement__c}" href=""
                                                           onclick="{!c.handleSalesAgreementClickNew}">
                                                            {!assignedResource.Sales_Agreement__r.Name}
                                                        </a>
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedDateTime value="{!assignedResource.Assign_Start_Date__c}"/>
                                                        
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedDateTime value="{!assignedResource.Assign_End_Date__c}"/>
                                                        
                                                    </td>
                                                    <!--td style="word-wrap: break-word;">
                                                        <lightning:button class="emmergencyButton" label="Raise Complaint" title="Raise Complaint"
                                                                          onclick="{!c.showCaseModal}" name="{!assignedResource.Id}" aura:id="{!assignedResource.Id}"/>
                                                    </td-->
                                                </tr>
                                                
                                            </aura:iteration>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </aura:if>
            <aura:if isTrue="{!v.assignVehicles}">
                <div class="documentmain animated slideInDown">
                    <div class="slds-grid slds-gutters ">
                        <div class="slds-col maincantentdiv" style="padding-top:0px">
                            <div class="tableshow">
                                <h3 class="Headingcontent">Active Assigned Vehicles</h3>
                                <aura:if isTrue="{!v.vehileList.length>0}"> 
                                    <div style="padding:0px" class="serchboxtab">
                                        <lightning:input type="search"
                                                         name="searchKey" value="{!v.searchText}" 
                                                         aura:id="searchKey"  onkeyup="{!c.searchVehicles}" 
                                                         placeholder="Search Vehicles" />
                                    </div>
                                </aura:if>
                                <lightning:button class="emmergencyButton" label="Download" title="Download" 
                                                  onclick="{!c.downloadVehicles}"/>
                                <lightning:buttonIcon iconName="utility:download" variant="neutral" class="downloadicon"
                                                      aura:id="more2"
                                                      onclick="{!c.downloadVehicles}"  
                                                      alternativeText="Download"   
                                                      title="Download" />
                                <div class="tableClass">
                                    <table class="slds-table slds-table_bordered " width="100%">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Name">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehicleName" style="color: #8f8888;"> 
                                                            Name
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Vehicle Number">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehicleNumber" style="color: #8f8888;"> 
                                                            Plate Number
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Vehicle Description">Vehicle Description
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sales Agreement Name">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehSAName" style="color: #8f8888;"> 
                                                            Sales Agreement Name
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign Start Date">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehStartDate" style="color: #8f8888;"> 
                                                            Assign Start Date
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehEndDate" style="color: #8f8888;"> 
                                                            Assign End Date
                                                        </a> 
                                                    </div>
                                                </th>
                                                <!--th class="" scope="col">
                                            <div class="slds-truncate" title="Contract End Date">Raise Complaint</div>
                                        </th-->
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <aura:iteration items="{!v.currentvehileList}" var="assignedVehicle"
                                                            indexVar="index">
                                                
                                                <tr class="slds-hint-parent">
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        {!index + 1}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <a id="{!assignedVehicle.Id}" href=""
                                                           onclick="{!c.handleAssignedVehiclesClickNew}">
                                                            {!assignedVehicle.Name}
                                                        </a>
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!assignedVehicle.Plate_Number__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!assignedVehicle.Vehicle_Description__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <a id="{!assignedVehicle.Sales_Agreement__c}" href=""
                                                           onclick="{!c.handleSalesAgreementClickNew}">
                                                            {!assignedVehicle.Sales_Agreement__r.Name}
                                                        </a>
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedDateTime value="{!assignedVehicle.Assign_Start_Date__c}"/>
                                                        
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedDateTime value="{!assignedVehicle.Assign_End_Date__c}"/>
                                                        
                                                    </td>
                                                    <!--td style="word-wrap: break-word;">
                                                        <lightning:button class="emmergencyButton" label="Raise Complaint" title="Raise Complaint"
                                                                          onclick="{!c.showCaseModal}" name="{!assignedVehicle.Id}" aura:id="{!assignedVehicle.Id}"/>
                                                    </td-->
                                                </tr>
                                                
                                            </aura:iteration>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </aura:if>
            
            <aura:if isTrue="{!v.showDashboard}">
                
                <c:ET_B2B_ViewDashboard currentaccountId="{!v.currentaccountId}" showAll="{!v.showAll}"/>
            </aura:if>
            
            <aura:if isTrue="{!v.invoices}">
                <div class="documentmain animated slideInDown">
                    <div class="slds-grid slds-gutters ">
                        <div class="slds-col maincantentdiv" style="padding-top:0px">
                            <aura:if isTrue="{!v.invoicesList.length>0}"> 
                                <div style="padding:0px" class="serchboxtab">
                                    <lightning:input type="search"
                                                     name="searchKey" value="{!v.searchText}" 
                                                     aura:id="searchKey"  onkeyup="{!c.searchInvoices}" 
                                                     placeholder="Search Invoices" />
                                </div>
                            </aura:if>
                            <div class="tableshow">
                                <!-- <h3 class="Headingcontent">Unpaid Invoices</h3> -->
                                
                                <h3 class="Headingcontent"> 
                                    <lightning:select   aura:id="InputSelectSingle" name ="select"  
                                                      onchange="{!c.onchangeInvoiceType}">
                                        <option value="All">All</option>
                                        <option value="Not Paid">Not Paid</option>
                                        <option value="Paid">Paid</option>
                                        
                                    </lightning:select>
                                    <!--  </div> -->
                                </h3> 
                                <lightning:button class="downloadButton" label="Download" title="Download" 
                                                  onclick="{!c.downloadInvoices}"/>
                                <lightning:buttonIcon iconName="utility:download" variant="neutral" class="downloadicon"
                                                      aura:id="more1"
                                                      onclick="{!c.downloadInvoices}"   
                                                      alternativeText="Download"   
                                                      title="Download" />
                                <div class="tableClass">
                                    <table class="slds-table slds-table_bordered " width="100%">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Invoice Number"> 
                                                        <a onclick="{!c.handleSortInvoices}" Id="invNumber" style="color: #8f8888;"> 
                                                            Invoice Number
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Invoice Date"> 
                                                        <a onclick="{!c.handleSortInvoices}" Id="invDate" style="color: #8f8888;"> 
                                                            Invoice Date
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col" style="text-align:right;">
                                                    <div class="slds-truncate" title="Invoice Amount"> 
                                                        <a onclick="{!c.handleSortInvoices}" Id="invAmount" style="color: #8f8888;"> 
                                                            Invoice Amount
                                                        </a> 
                                                    </div>
                                                </th>
                                                
                                                <th class="" scope="col" style="text-align:right;">
                                                    <div class="slds-truncate" title="Due Amount"> 
                                                        <a onclick="{!c.handleSortInvoices}" Id="invDueAmount" style="color: #8f8888;"> 
                                                            Due Amount
                                                        </a> 
                                                    </div>
                                                </th>
                                                
                                                <th class="" scope="col" style="text-align:right;">
                                                    <div class="slds-truncate" title="Payment Status"> 
                                                        <a onclick="{!c.handleSortInvoices}" Id="payStatus" style="color: #8f8888;"> 
                                                            Payment Status
                                                        </a> 
                                                    </div>
                                                </th>
                                                
                                                
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sales Agreement">
                                                        <a onclick="{!c.handleSortInvoices}" Id="invSaleAggrement" style="color: #8f8888;"> 
                                                            Sales Agreement
                                                        </a> 
                                                    </div>
                                                </th>
                                                <!--th class="" scope="col">
                                                <div class="slds-truncate" title="Contract End Date">Raise Complaint</div>
                                            </th-->
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <aura:iteration items="{!v.currentInvoicesList}" var="invoice"
                                                            indexVar="index">
                                                
                                                <tr class="slds-hint-parent">
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        {!index + 1}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <a id="{!invoice.Id}" href="" onclick="{!c.handleinvoicesClickNew}">
                                                            {!invoice.Invoice_Number__c}
                                                        </a>
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        
                                                        <lightning:formattedDateTime value="{!invoice.Invoice_Date__c}"/>
                                                    </td>
                                                    <td style="word-wrap: break-word;text-align:right;">
                                                        <lightning:formattedNumber style="currency" value="{!invoice.Invoice_Amount__c}" currencyCode="AED"/>
                                                    </td>
                                                    <td style="word-wrap: break-word;text-align:right;">
                                                        <lightning:formattedNumber style="currency" value="{!invoice.Due_Amount__c}" currencyCode="AED"/> 
                                                    </td>
                                                    <td style="word-wrap: break-word;">                                                  
                                                        {!invoice.Payment_Status__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <a id="{!invoice.Sales_Agreement__c}" href=""
                                                           onclick="{!c.handleSalesAgreementClickNew}">
                                                            {!invoice.Sales_Agreement__r.Name}
                                                        </a>
                                                    </td>
                                                    <!--td style="word-wrap: break-word;">
                                                        <lightning:button class="emmergencyButton" label="Raise Complaint" title="Raise Complaint"
                                                                          onclick="{!c.showCaseModal}" name="{!invoice.Id}" aura:id="{!invoice.Id}"/>
                                                    </td-->
                                                </tr>
                                                
                                            </aura:iteration>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </aura:if>
            <aura:if isTrue="{!v.sites}">
                
                <div class="documentmain animated slideInDown">
                    <div class="slds-grid slds-gutters ">
                        <div class="slds-col maincantentdiv" style="padding-top:0px">
                            <aura:if isTrue="{!v.siteList.length>0}"> 
                                <div style="padding:0px" class="serchboxtab">
                                    <lightning:input type="search"
                                                     name="searchKey" value="{!v.searchText}" 
                                                     aura:id="searchKey"  onkeyup="{!c.searchSites}" 
                                                     placeholder="Search Sites" />
                                </div>
                            </aura:if>
                            <div class="tableshow">
                                <h3 class="Headingcontent">Active Sites</h3>
                                <lightning:button class="downloadButton" label="Download" title="Download" 
                                                  onclick="{!c.downloadSites}"/>
                                <lightning:buttonIcon iconName="utility:download" variant="neutral" class="downloadicon"
                                                      aura:id="more"
                                                      onclick="{!c.downloadSites}"   
                                                      alternativeText="Download"   
                                                      title="Download" />
                                <div class="tableClass">
                                    <table class="slds-table slds-table_bordered " width="100%">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Invoice Number">
                                                        <a onclick="{!c.handleSortSites}" Id="siteName" style="color: #8f8888;"> 
                                                            Site Name 
                                                        </a>
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Total Invoice Amount"> 
                                                        <a onclick="{!c.handleSortSites}" Id="siteLocation" style="color: #8f8888;"> 
                                                            Location
                                                        </a>
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Invoice Description"> 
                                                        <a onclick="{!c.handleSortSites}" Id="siteFirstName" style="color: #8f8888;"> 
                                                            Contact Name
                                                        </a>
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sales Agreement Name">
                                                        <a onclick="{!c.handleSortSites}" Id="sitePhone" style="color: #8f8888;"> 
                                                            Contact Phone
                                                        </a> 
                                                    </div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <aura:iteration items="{!v.currentsiteData}" var="std"
                                                            indexVar="index">
                                                
                                                <tr class="slds-hint-parent">
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        {!index + 1}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!std.Account.Name}
                                                        
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!std.Account.ET_Preferred_Location__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!std.FirstName}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!std.Phone}
                                                    </td>
                                                    
                                                </tr>
                                                
                                            </aura:iteration>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </aura:if>
            
            <!-- Maintenance Aggrement tables-->
            <aura:if isTrue="{!v.assignMaintenanceVehicles}">
                <div class="documentmain animated slideInDown">
                    <div class="slds-grid slds-gutters ">
                        <div class="slds-col maincantentdiv" style="padding-top:0px">
                            <div class="tableshow">
                                <h3 class="Headingcontent">Active Assigned Maintenance  Vehicles</h3>
                                <lightning:button class="emmergencyButton" label="Download" title="Download" 
                                                  onclick="{!c.downloadMaintenanceVehicles}"/>
                                <lightning:buttonIcon iconName="utility:download" variant="neutral" class="downloadicon"
                                                      aura:id="more2"
                                                      onclick="{!c.downloadMaintenanceVehicles}"  
                                                      alternativeText="Download"   
                                                      title="Download" />
                                <div class="tableClass">
                                    <table class="slds-table slds-table_bordered " width="100%">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Vehicle Plate No">
                                                        Vehicle Plate No
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="ET Ref No">
                                                        ET Ref No
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" style="word-wrap: break-word;text-align:left;" title="Vehicle Type">
                                                        Vehicle Type
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" style="word-wrap: break-word;text-align:left;" title="Make">
                                                        Make 
                                                    </div>
                                                </th>
                                                <th class="" scope="col" style="word-wrap: break-word;text-align:left;">
                                                    <div class="slds-truncate" title="Family">
                                                        Family
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Year">
                                                        Year
                                                    </div>
                                                </th>
                                                
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <aura:iteration items="{!v.vehicleMaintenanceList}" var="assignedVehicle"
                                                            indexVar="index">
                                                
                                                <tr class="slds-hint-parent">
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        {!index + 1}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!assignedVehicle.Plate_No__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!assignedVehicle.Internal_No__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;text-align:left;">
                                                        {!assignedVehicle.Vehicle_Type__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;text-align:left;">
                                                        {!assignedVehicle.Vehicle_Make__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;text-align:left;">
                                                        {!assignedVehicle.Vehicle_Family__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!assignedVehicle.Vehicle_Year__c}
                                                    </td>
                                                    
                                                </tr>
                                                
                                            </aura:iteration>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </aura:if>
            <aura:if isTrue="{!v.assignMaintenanceWo}">
                <div class="documentmain animated slideInDown">
                    <div class="slds-grid slds-gutters ">
                        <div class="slds-col maincantentdiv" style="padding-top:0px">
                            <div class="tableshow">
                                <h3 class="Headingcontent">Maintenance Work Orders</h3>
                                <lightning:button class="emmergencyButton" label="Download" title="Download" 
                                                  onclick="{!c.downloadMaintenanceWO}"/>
                                <lightning:buttonIcon iconName="utility:download" variant="neutral" class="downloadicon"
                                                      aura:id="more2"
                                                      onclick="{!c.downloadMaintenanceWO}"  
                                                      alternativeText="Download"   
                                                      title="Download" /> 
                                <div class="tableClass">
                                    <table class="slds-table slds-table_bordered " width="100%">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Vehicle">
                                                        Vehicle 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Work order">
                                                        Work order
                                                    </div>
                                                </th>
                                                 <th class="" scope="col">
                                                    <div class="slds-truncate" title="Work order">
                                                        SR Ref No
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Vehicle checked in ">
                                                        Vehicle checked in 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sales Agreement Name">
                                                        Delivered On
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign Start Date">
                                                        Service Location
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date">
                                                        Work description
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date">
                                                        Status
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date">
                                                        KM Reading
                                                    </div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <aura:iteration items="{!v.maintenanceWoList}" var="wo"
                                                            indexVar="index">
                                                
                                                <tr class="slds-hint-parent">
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        {!index + 1}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!wo.Plate_Number__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!wo.Work_Order__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!wo.Service_Req_Ref_No__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedDateTime value="{!wo.Vehicle_Received_On__c}" year="2-digit" month="short" day="2-digit" hour="2-digit" minute="2-digit"  hour12="true"/> 
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedDateTime value="{!wo.Delivered_On__c}" year="2-digit" month="short" day="2-digit" hour="2-digit" minute="2-digit"  hour12="true"/>
                                                    </td>
                                                    <td style="word-wrap: break-word;text-align:left;">
                                                        {!wo.Service_Location__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;text-align:left;">
                                                        {!wo.Description__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!wo.Work_Status__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!wo.KM_Reading__c}
                                                    </td>
                                                </tr>
                                                
                                            </aura:iteration>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </aura:if>
            <aura:if isTrue="{!v.assignEstimation}">
                <div class="documentmain animated slideInDown">
                    <div class="slds-grid slds-gutters ">
                        <div class="slds-col maincantentdiv" style="padding-top:0px">
                            <div class="tableshow">
                                <h3 class="Headingcontent">Maintenance Estimation</h3>
                                <lightning:button class="emmergencyButton" label="Download" title="Download" 
                                                  onclick="{!c.downloadMaintenanceEstimation}"/>
                                <lightning:buttonIcon iconName="utility:download" variant="neutral" class="downloadicon"
                                                      aura:id="more2"
                                                      onclick="{!c.downloadMaintenanceEstimation}"  
                                                      alternativeText="Download"   
                                                      title="Download" /> 
                                <div class="tableClass">
                                    <table class="slds-table slds-table_bordered " width="100%">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Name">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehicleName" style="color: #8f8888;"> 
                                                            Vehicle
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Vehicle Number">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehicleNumber" style="color: #8f8888;"> 
                                                            Estimate No
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Vehicle Description">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehicleNumber" style="color: #8f8888;"> 
                                                            Work order
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sales Agreement Name">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehSAName" style="color: #8f8888;word-wrap: break-word;text-align:left;"> 
                                                            Description
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign Start Date">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehStartDate" style="color: #8f8888;word-wrap: break-word;text-align:left;"> 
                                                            Service Location
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehEndDate" style="color: #8f8888;word-wrap: break-word;text-align:left;"> 
                                                            Estimator
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehEndDate" style="color: #8f8888;"> 
                                                            Creation Date
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehEndDate" style="color: #8f8888;"> 
                                                            Total Material Charge
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehEndDate" style="color: #8f8888;"> 
                                                            Total Labor Charge
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehEndDate" style="color: #8f8888;"> 
                                                            Other Charges
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehEndDate" style="color: #8f8888;"> 
                                                            Net Amount
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehEndDate" style="color: #8f8888;"> 
                                                            Invoice Number
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehEndDate" style="color: #8f8888;"> 
                                                            Invoiced Y/N
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehEndDate" style="color: #8f8888;"> 
                                                            Paid Y/N
                                                        </a> 
                                                    </div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <aura:iteration items="{!v.maintenanceEstList}" var="wo"
                                                            indexVar="index">
                                                
                                                <tr class="slds-hint-parent">
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        {!index + 1}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!wo.Plate_Number__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!wo.Name}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!wo.Work_order__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;text-align:left;">
                                                        {!wo.Description__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;text-align:left;">
                                                        {!wo.Service_Location__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;text-align:left;">
                                                        {!wo.Estimator__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedDateTime value="{!wo.CreatedDate}"/> 
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedNumber value="{!wo.Materials__c}" style="currency" currencyCode="AED"/> 
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedNumber value="{!wo.Labor__c}" style="currency" currencyCode="AED"/> 
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedNumber value="{!wo.Others__c}" style="currency" currencyCode="AED"/> 
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedNumber value="{!wo.Net_Amount__c}" style="currency" currencyCode="AED"/>
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!wo.Invoice_Number__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!wo.Invoiced__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!wo.Paid__c}
                                                    </td>
                                                </tr>
                                                
                                            </aura:iteration>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </aura:if>
            <aura:if isTrue="{!v.assignActiveMaintenanceWo}">
                <div class="documentmain animated slideInDown">
                    <div class="slds-grid slds-gutters ">
                        <div class="slds-col maincantentdiv" style="padding-top:0px">
                            <div class="tableshow">
                                <h3 class="Headingcontent">Active Maintenance Work Orders</h3>
                                <lightning:button class="emmergencyButton" label="Download" title="Download" 
                                                  onclick="{!c.downloadActiveMaintenanceWO}"/>
                                <lightning:buttonIcon iconName="utility:download" variant="neutral" class="downloadicon"
                                                      aura:id="more2"
                                                      onclick="{!c.downloadActiveMaintenanceWO}"  
                                                      alternativeText="Download"   
                                                      title="Download" /> 
                                <div class="tableClass">
                                    <table class="slds-table slds-table_bordered " width="100%">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sr. No.">Sr. No.</div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Name">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehicleName" style="color: #8f8888;"> 
                                                            Vehicle
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Vehicle Number">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehicleNumber" style="color: #8f8888;"> 
                                                            Work order
                                                        </a> 
                                                    </div>
                                                </th>
                                               
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Vehicle Description">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehicleNumber" style="color: #8f8888;"> 
                                                            Vehicle checked in 
                                                        </a> 
                                                    </div>
                                                </th>
                                                <!-- <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sales Agreement Name">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehSAName" style="color: #8f8888;"> 
                                                            Delivered On
                                                        </a> 
                                                    </div>
                                                </th> -->
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign Start Date">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehStartDate" style="color: #8f8888;"> 
                                                            Service Location
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehEndDate" style="color: #8f8888;word-wrap: break-word;text-align:left;"> 
                                                            Work description
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehEndDate" style="color: #8f8888;"> 
                                                            Status
                                                        </a> 
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Assign End Date">
                                                        <a onclick="{!c.handleSortVehicles}" Id="vehEndDate" style="color: #8f8888;"> 
                                                            KM Reading
                                                        </a> 
                                                    </div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <aura:iteration items="{!v.activeMaintenanceWoList}" var="wo"
                                                            indexVar="index">
                                                
                                                <tr class="slds-hint-parent">
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        {!index + 1}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!wo.Plate_Number__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!wo.Work_Order__c}
                                                    </td>
                                                                                                  
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedDateTime value="{!wo.Vehicle_Received_On__c}"/> 
                                                    </td>
                                                    <!--  <td style="word-wrap: break-word;">
                                                        <lightning:formattedDateTime value="{!wo.Delivered_On__c}"/>
                                                    </td> -->
                                                    <td style="word-wrap: break-word;">
                                                        {!wo.Service_Location__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;text-align:left;">
                                                        {!wo.Description__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!wo.Work_Status__c}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!wo.KM_Reading__c}
                                                    </td>
                                                </tr>
                                                
                                            </aura:iteration>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </aura:if>
            <aura:if isTrue="{!v.isHSEDetail}">
                
                
                
                <lightning:tabset class="tabview_details" onselect="{! c.handleTabSelect }">
                    <lightning:tab label="HSE Score" id="hse_score">
                        <div class="documentmain animated slideInDown">
                            <div class="slds-grid slds-gutters ">
                                <div class="slds-col maincantentdiv" style="padding-top:0px">
                                    <div class="tableshow">
                                        <h3 class="Headingcontent">HSE Score Details</h3>
                                        
                                        <div class="tableClass">
                                            <table class="slds-table slds-table_bordered " width="100%">
                                                <thead>
                                                    <tr class="slds-line-height_reset">
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Month">Month</div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Year">
                                                                Year
                                                            </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Weightage">
                                                                Weightage
                                                            </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Score">
                                                                Score
                                                            </div>
                                                        </th>
                                                        
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Cumulative Score">
                                                                Cumulative Score
                                                            </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Percentage">
                                                                Percentage
                                                            </div>
                                                        </th>
                                                        
                                                        
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <aura:iteration items="{!v.hsescores}" var="hse"
                                                                    indexVar="index">
                                                        
                                                        <tr class="slds-hint-parent">
                                                            
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.Month__c}
                                                            </td>
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.Year__c}
                                                            </td>
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.Weightage__c}
                                                            </td>
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.Score__c}
                                                            </td>
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.Cumulative_Score__c}
                                                            </td>
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.Percentage__c}
                                                            </td>  
                                                            
                                                        </tr>
                                                    </aura:iteration>
                                                </tbody>
                                            </table>
                                            <aura:if isTrue="{!empty(v.hsescores)}">
                                                <div style="margin: 39px;" class="slds-align_absolute-center">No records found.</div>
                                            </aura:if>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </lightning:tab>
                    <lightning:tab label="HSE Inspection" id="hse_inspection">
                        
                        <div class="documentmain animated slideInDown">
                            <div class="slds-grid slds-gutters ">
                                <div class="slds-col maincantentdiv" style="padding-top:0px">
                                    <div class="tableshow">
                                        <h3 class="Headingcontent">HSE Inspection Details</h3>
                                        
                                        <div class="tableClass">
                                            <table class="slds-table slds-table_bordered " width="100%">
                                                <thead>
                                                    <tr class="slds-line-height_reset">
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="ref">Ref. No.</div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="fleet">No. of Fleet </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="desc">Description </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="InspectionDate">Inspected Date </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Created">Created By </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="attach">Attachment </div>
                                                        </th>
                                                        
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <aura:iteration items="{!v.hseInspections}" var="hse"
                                                                    indexVar="index">
                                                        
                                                        <tr class="slds-hint-parent">
                                                            
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.Name}
                                                            </td>
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.No_of_Fleets__c}
                                                            </td>
                                                            <td style="word-wrap: break-word;">
                                                                <ui:outputTextArea value="{!hse.Description__c}"/> 
                                                            </td>
                                                            
                                                            <td style="word-wrap: break-word;">
                                                                <lightning:formattedDateTime  value="{!hse.Inspected_Date__c}" year="numeric" month="numeric" day="numeric"  hour="2-digit" minute="2-digit" hour12="true"/>
                                                            </td>
                                                            
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.CreatedBy.Name}
                                                            </td>
                                                            <td>
                                                                <aura:if isTrue="{!not(empty(hse.ContentDocumentLinks))}">
                                                                    <aura:iteration items="{!hse.ContentDocumentLinks}" var="doc"
                                                                                    indexVar="index1">
                                                                        
                                                                        <aura:if isTrue="{!index1 == 0}">                                                                                                                         
                                                                            
                                                                            <a href="" id="{!doc.ContentDocumentId}" onclick="{!c.OpenFile}">
                                                                                <lightning:icon iconName="doctype:pdf"  size="small" alternativeText="Image file" title="File" />
                                                                            </a>
                                                                            
                                                                        </aura:if>                        
                                                                    </aura:iteration>
                                                                </aura:if>
                                                                <aura:if isTrue="{!empty(hse.ContentDocumentLinks)}">
                                                                    <lightning:icon iconName="doctype:unknown" size="small" alternativeText="No file!" title="No file" />
                                                                </aura:if>
                                                                
                                                            </td>
                                                            
                                                        </tr>
                                                    </aura:iteration>
                                                </tbody>
                                            </table>
                                            <aura:if isTrue="{!empty(v.hseInspections)}">
                                                <div style="margin: 39px;" class="slds-align_absolute-center">No records found.</div>
                                            </aura:if>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>                       
                        
                    </lightning:tab>
                    <lightning:tab label="IVMS Devices" id="hse_ivms">
                        
                        <div class="documentmain animated slideInDown">
                            <div class="slds-grid slds-gutters ">
                                <div class="slds-col maincantentdiv" style="padding-top:0px">
                                    <div class="tableshow">
                                        <h3 class="Headingcontent">IVMS Devices Details</h3>
                                        <div class="tableClass">
                                            <table class="slds-table slds-table_bordered " width="100%">
                                                <thead>
                                                    <tr class="slds-line-height_reset">
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="ref">Ref. No.</div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Device">No. of Devices </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Desc">Description </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Installation">Installation Date </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="CreatedBy">Created By </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Attach">Attachement</div>
                                                        </th>
                                                        
                                                        
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <aura:iteration items="{!v.ivmsDevices}" var="hse"
                                                                    indexVar="index">
                                                        
                                                        <tr class="slds-hint-parent">
                                                            
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.Name}
                                                            </td>
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.No_of_Devices__c}
                                                            </td>
                                                            <td style="word-wrap: break-word;">
                                                                <ui:outputTextArea value="{!hse.Description__c}"/> 
                                                            </td>
                                                            
                                                            <td style="word-wrap: break-word;">
                                                                <lightning:formattedDateTime  value="{!hse.Installation_Date__c}" year="numeric" month="numeric" day="numeric"  hour="2-digit" minute="2-digit" hour12="true"/>
                                                            </td>
                                                            
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.CreatedBy.Name}
                                                            </td>
                                                            <td>
                                                                <aura:if isTrue="{!not(empty(hse.ContentDocumentLinks))}">
                                                                    <aura:iteration items="{!hse.ContentDocumentLinks}" var="doc"
                                                                                    indexVar="index1">
                                                                        
                                                                        <aura:if isTrue="{!index1 == 0}">                                                                                                                         
                                                                            
                                                                            <a href="" id="{!doc.ContentDocumentId}" onclick="{!c.OpenFile}">
                                                                                <lightning:icon iconName="doctype:pdf"  size="small" alternativeText="Image file" title="File" />
                                                                            </a>
                                                                            
                                                                        </aura:if>                        
                                                                    </aura:iteration>
                                                                </aura:if>
                                                                <aura:if isTrue="{!empty(hse.ContentDocumentLinks)}">
                                                                    <lightning:icon iconName="doctype:unknown" size="small" alternativeText="No file!" title="No file" />
                                                                </aura:if>
                                                                
                                                            </td>
                                                            
                                                            
                                                        </tr>
                                                    </aura:iteration>
                                                </tbody>
                                            </table>
                                            <aura:if isTrue="{!empty(v.ivmsDevices)}">
                                                <div style="margin: 39px;" class="slds-align_absolute-center">No records found.</div>
                                            </aura:if>
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>
                        </div> 
                        
                    </lightning:tab>
                    <lightning:tab label="Spot Check" id="hse_spotcheck">
                        
                        <div class="documentmain animated slideInDown">
                            <div class="slds-grid slds-gutters ">
                                <div class="slds-col maincantentdiv" style="padding-top:0px">
                                    <div class="tableshow">
                                        <h3 class="Headingcontent">Spot Check Details</h3>
                                        <div class="tableClass">
                                            <table class="slds-table slds-table_bordered " width="100%">
                                                <thead>
                                                    <tr class="slds-line-height_reset">
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="ref">Ref. No.</div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Year">No. of Fleet </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Year">Description </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Year">Inspected Date </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Year">Created By </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Year">Attachment </div>
                                                        </th>
                                                        
                                                        
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <aura:iteration items="{!v.spotChecks}" var="hse"
                                                                    indexVar="index">
                                                        
                                                        <tr class="slds-hint-parent">
                                                            
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.Name}
                                                            </td>
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.No_of_Fleets__c}
                                                            </td>
                                                            <td style="word-wrap: break-word;">
                                                                <ui:outputTextArea value="{!hse.Description__c}"/> 
                                                            </td>
                                                            
                                                            <td style="word-wrap: break-word;">
                                                                <lightning:formattedDateTime  value="{!hse.Inspected_Date__c}" year="numeric" month="numeric" day="numeric"  hour="2-digit" minute="2-digit" hour12="true"/>
                                                            </td>
                                                            
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.CreatedBy.Name}
                                                            </td>
                                                            <td>
                                                                <aura:if isTrue="{!not(empty(hse.ContentDocumentLinks))}">
                                                                    <aura:iteration items="{!hse.ContentDocumentLinks}" var="doc"
                                                                                    indexVar="index1">
                                                                        
                                                                        <aura:if isTrue="{!index1 == 0}">                                                                                                                         
                                                                            
                                                                            <a href="" id="{!doc.ContentDocumentId}" onclick="{!c.OpenFile}">
                                                                                <lightning:icon iconName="doctype:pdf"  size="small" alternativeText="Image file" title="File" />
                                                                            </a>
                                                                            
                                                                        </aura:if>                        
                                                                    </aura:iteration>
                                                                </aura:if>
                                                                <aura:if isTrue="{!empty(hse.ContentDocumentLinks)}">
                                                                    <lightning:icon iconName="doctype:unknown" size="small" alternativeText="No file!" title="No file" />
                                                                </aura:if>
                                                                
                                                            </td>
                                                            
                                                        </tr>
                                                    </aura:iteration>
                                                </tbody>
                                            </table>
                                            
                                            <aura:if isTrue="{!empty(v.spotChecks)}">
                                                <div style="margin: 39px;" class="slds-align_absolute-center">No records found.</div>
                                            </aura:if>
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>
                        </div> 
                        
                    </lightning:tab>
                    <lightning:tab label="Road Safety Workshop" id="hse_roadsafety">
                        
                        <div class="documentmain animated slideInDown">
                            <div class="slds-grid slds-gutters ">
                                <div class="slds-col maincantentdiv" style="padding-top:0px">
                                    <div class="tableshow">
                                        <h3 class="Headingcontent">Road Safety Workshop Details</h3>
                                        
                                        <div class="tableClass">
                                            <table class="slds-table slds-table_bordered " width="100%">
                                                <thead>
                                                    <tr class="slds-line-height_reset">
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="ref">Ref. No.</div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="att">No. of People Attended </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Desc">Description </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Wrk">Workshop Date </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Created">Created By </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Attach">Attachment </div>
                                                        </th>
                                                        
                                                        
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <aura:iteration items="{!v.roadSafetyWrksp}" var="hse"
                                                                    indexVar="index">
                                                        
                                                        <tr class="slds-hint-parent">
                                                            
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.Name}
                                                            </td>
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.No_of_People_Attended__c}
                                                            </td>
                                                            <td style="word-wrap: break-word;">
                                                                <ui:outputTextArea value="{!hse.Description__c}"/> 
                                                            </td>
                                                            
                                                            <td style="word-wrap: break-word;">
                                                                <lightning:formattedDateTime  value="{!hse.Workshop_Date__c}" year="numeric" month="numeric" day="numeric"  hour="2-digit" minute="2-digit" hour12="true"/>
                                                            </td>
                                                            
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.CreatedBy.Name}
                                                            </td>
                                                            <td>
                                                                <aura:if isTrue="{!not(empty(hse.ContentDocumentLinks))}">
                                                                    <aura:iteration items="{!hse.ContentDocumentLinks}" var="doc"
                                                                                    indexVar="index1">
                                                                        
                                                                        <aura:if isTrue="{!index1 == 0}">                                                                                                                         
                                                                            
                                                                            <a href="" id="{!doc.ContentDocumentId}" onclick="{!c.OpenFile}">
                                                                                <lightning:icon iconName="doctype:pdf"  size="small" alternativeText="Image file" title="File" />
                                                                            </a>
                                                                            
                                                                        </aura:if>                        
                                                                    </aura:iteration>
                                                                </aura:if>
                                                                <aura:if isTrue="{!empty(hse.ContentDocumentLinks)}">
                                                                    <lightning:icon iconName="doctype:unknown" size="small" alternativeText="No file!" title="No file" />
                                                                </aura:if>
                                                                
                                                            </td>
                                                            
                                                        </tr>
                                                    </aura:iteration>
                                                </tbody>
                                            </table>
                                            <aura:if isTrue="{!empty(v.roadSafetyWrksp)}">
                                                <div style="margin: 39px;" class="slds-align_absolute-center">No records found.</div>
                                            </aura:if>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> 
                        
                    </lightning:tab>
                    <lightning:tab label="HSE Induction" id="hse_induction">
                        <div class="documentmain animated slideInDown">
                            <div class="slds-grid slds-gutters ">
                                <div class="slds-col maincantentdiv" style="padding-top:0px">
                                    <div class="tableshow">
                                        <h3 class="Headingcontent">HSE Induction Details</h3>
                                        <div class="tableClass">
                                            <table class="slds-table slds-table_bordered " width="100%">
                                                <thead>
                                                    <tr class="slds-line-height_reset">
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="ref">Ref. No.</div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Attended">No. of People Attended </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Desc">Description </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="Induction">Induction Date </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="created">Created By </div>
                                                        </th>
                                                        <th class="" scope="col">
                                                            <div class="slds-truncate" title="attach">Attachment </div>
                                                        </th>
                                                        
                                                        
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <aura:iteration items="{!v.hseInduction}" var="hse"
                                                                    indexVar="index">
                                                        
                                                        <tr class="slds-hint-parent">
                                                            
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.Name}
                                                            </td>
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.No_of_People_Attended__c}
                                                            </td>
                                                            <td style="word-wrap: break-word;">
                                                                <ui:outputTextArea value="{!hse.Description__c}"/> 
                                                            </td>
                                                            
                                                            <td style="word-wrap: break-word;">
                                                                <lightning:formattedDateTime  value="{!hse.Induction_Date__c}" year="numeric" month="numeric" day="numeric"  hour="2-digit" minute="2-digit" hour12="true"/>
                                                            </td>
                                                            
                                                            <td style="word-wrap: break-word;">
                                                                {!hse.CreatedBy.Name}
                                                            </td>
                                                            <td>
                                                                <aura:if isTrue="{!not(empty(hse.ContentDocumentLinks))}">
                                                                    <aura:iteration items="{!hse.ContentDocumentLinks}" var="doc"
                                                                                    indexVar="index1">
                                                                        
                                                                        <aura:if isTrue="{!index1 == 0}">                                                                                                                         
                                                                            
                                                                            <a href="" id="{!doc.ContentDocumentId}" onclick="{!c.OpenFile}">
                                                                                <lightning:icon iconName="doctype:pdf"  size="small" alternativeText="Image file" title="File" />
                                                                            </a>
                                                                            
                                                                        </aura:if>                        
                                                                    </aura:iteration>
                                                                </aura:if>
                                                                <aura:if isTrue="{!empty(hse.ContentDocumentLinks)}">
                                                                    <lightning:icon iconName="doctype:unknown" size="small" alternativeText="No file!" title="No file" />
                                                                </aura:if>
                                                                
                                                            </td>
                                                            
                                                        </tr>
                                                    </aura:iteration>
                                                </tbody>
                                            </table>
                                            <aura:if isTrue="{!empty(v.spotChecks)}">
                                                <div style="margin: 39px;" class="slds-align_absolute-center">No records found.</div>
                                            </aura:if>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> 
                    </lightning:tab>
                </lightning:tabset>                
                
            </aura:if>
            
            <aura:if isTrue="{!v.isServiceReq}">               
                
                <div class="documentmain animated slideInDown">                    
                    <div class="slds-grid slds-gutters ">
                        <div class="slds-col maincantentdiv" style="padding-top:0px">
                              <lightning:button  label="New" variant="brand" class="btn_new mrg_right" title="New" onclick="{!c.showNewSerReq}"/>

                            <div style="padding:0px" class="serchboxtab">
                                <!--aura:if isTrue="{!not(empty(v.accidentsList))}">  
                                    <lightning:input type="search"
                                                     name="searchKey" value="{!v.searchText}" 
                                                     aura:id="searchKey"  oncommit="{!c.filterAccidents}" onchange="{!c.filterAccidents}" autocomplete="off" 
                                                     placeholder="Search Vehicle Accidents" />
                                </aura:if-->
                            </div>
                            <div class="tableshow">
                                <h3 class="Headingcontent">Service Requests Detail</h3>
                                
                                
                                <div class="tableClass">
                                    <table class="slds-table slds-table_bordered slds-table_fixed-layout" width="100%">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sno">S.No</div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="RefNo">
                                                        Name
                                                    </div>
                                                </th>                                                
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="PalteNo">
                                                        Internal No
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="AccType">
                                                        Workshop Location
                                                    </div>
                                                </th>
                                                
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="AccLoc">
                                                        Odometer Km
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Date">
                                                        Description
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="srNo">
                                                        Request No.
                                                    </div>
                                                </th>
                                                
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <aura:iteration items="{!v.fleetServiceRequestList}" var="ac"
                                                            indexVar="index">
                                                
                                                <tr class="slds-hint-parent">
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        {!index + 1}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <!--a id="{!ac.Id}" href="">
                                                            
                                                        </a-->
                                                        {!ac.Name}
                                                    </td>
                                                    
                                                    <td style="word-wrap: break-word;">
                                                                                                              
                                                            {!ac.Customer_Vehicle__r.Internal_No__c}
                                                        
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <ui:outputText value="{!ac.Workshop_Location__r.Name}" />
                                                    </td>
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        <ui:outputText value="{!ac.Odometer_Km__c}"/>
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <ui:outputTextArea value="{!ac.Description__c }"/>
                                                    </td>
                                                     <td style="word-wrap: break-word;">
                                                        <ui:outputTextArea value="{!ac.Service_Number__c}"/>
                                                    </td>
                                                    
                                                </tr>
                                            </aura:iteration>
                                        </tbody>
                                    </table>
                                    <aura:if isTrue="{!empty(v.fleetServiceRequestList)}">
                                        <div style="margin: 39px;" class="slds-align_absolute-center">You don't have any Fleet Service Request.</div>
                                    </aura:if>
                                   
                                </div> 
                            </div>
                        </div>
                    </div>
                </div>
                
                
            </aura:if>
            <aura:if isTrue="{!v.isAccVisit}">
                <div class="documentmain animated slideInDown">
                    <div class="slds-grid slds-gutters ">
                        <div class="slds-col maincantentdiv" style="padding-top:0px">
                            <div style="padding:0px" class="serchboxtab">
                                <aura:if isTrue="{!not(empty(v.accVisitList))}">  
                                    <lightning:input type="search"
                                                     name="searchKey" value="{!v.searchText}" 
                                                     aura:id="searchKey"  oncommit="{!c.filterAccVisits}" onchange="{!c.filterAccVisits}" autocomplete="off" 
                                                     placeholder="Search Account Visits" />
                                </aura:if>
                            </div>
                            <div class="tableshow">
                                <h3 class="Headingcontent">Account Visits Detail</h3>
                                
                                <div class="tableClass">
                                    <table class="slds-table slds-table_bordered slds-table_fixed-layout" width="100%">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sno">S.No</div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="RefNo">
                                                        Ref. No.
                                                    </div>
                                                </th>                                                
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="PurposeOfVisit">
                                                        Purpose Of Visit
                                                    </div>
                                                </th>
                                                
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="AgreedActions">
                                                        Agreed Actions
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="DateOfVisit">
                                                        Date Of Visit
                                                    </div>
                                                </th>
                                                
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <aura:iteration items="{!v.accVisitFilterList}" var="accVisit"
                                                            indexVar="index">
                                                
                                                <tr class="slds-hint-parent">
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        {!index + 1}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        {!accVisit.Name}
                                                    </td>
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        <ui:outputTextArea value="{!accVisit.Purpose_of_Visit__c}"/> 
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <ui:outputTextArea value="{!accVisit.Agreed_Actions__c}"/>
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedDateTime value="{!accVisit.Date_of_Visit__c}"/>
                                                    </td>
                                                    
                                                    
                                                </tr>
                                            </aura:iteration>
                                        </tbody>
                                    </table>
                                    <aura:if isTrue="{!empty(v.accVisitList)}">
                                        <div style="margin: 39px;" class="slds-align_absolute-center">You don't have any account visits.</div>
                                    </aura:if>
                                    <aura:if isTrue="{!empty(v.accVisitFilterList) &amp;&amp; !empty(v.accVisitList)}">
                                        <div style="margin: 39px;" class="slds-align_absolute-center">We don't have any visits with search keyword.</div>
                                    </aura:if>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </aura:if>
            
            <aura:if isTrue="{!v.isVehAccident}">
                <div class="documentmain animated slideInDown">
                    <div class="slds-grid slds-gutters ">
                        <div class="slds-col maincantentdiv" style="padding-top:0px">
                            <div style="padding:0px" class="serchboxtab">
                                <aura:if isTrue="{!not(empty(v.accidentsList))}">  
                                    <lightning:input type="search"
                                                     name="searchKey" value="{!v.searchText}" 
                                                     aura:id="searchKey"  oncommit="{!c.filterAccidents}" onchange="{!c.filterAccidents}" autocomplete="off" 
                                                     placeholder="Search Vehicle Accidents" />
                                </aura:if>
                            </div>
                            <div class="tableshow">
                                <h3 class="Headingcontent">Vehicle Accidents Detail</h3>
                                
                                <div class="tableClass">
                                    <table class="slds-table slds-table_bordered slds-table_fixed-layout" width="100%">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Sno">S.No</div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="RefNo">
                                                        Ref. No.
                                                    </div>
                                                </th>                                                
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="PalteNo">
                                                        Plate No.
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="AccType">
                                                        Accident Type
                                                    </div>
                                                </th>
                                                
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="AccLoc">
                                                        Accident Location
                                                    </div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate" title="Date">
                                                        Accident Date
                                                    </div>
                                                </th>
                                                
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <aura:iteration items="{!v.accidentsFilterList}" var="ac"
                                                            indexVar="index">
                                                
                                                <tr class="slds-hint-parent">
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        {!index + 1}
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <a id="{!ac.Id}" href=""
                                                           onclick="{!c.accidentDetailView}">
                                                            {!ac.Name}
                                                        </a>
                                                    </td>
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        
                                                        <a id="{!ac.Vehicle__c}" href=""
                                                           onclick="{!c.vehicleMasterView}">
                                                            {!ac.Vehicle__r.Plate_Number__c}
                                                        </a>
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <ui:outputTextArea value="{!ac.Accident_Type__c}" />
                                                    </td>
                                                    
                                                    <td style="word-wrap: break-word;">
                                                        <ui:outputTextArea value="{!ac.Accident_Location__c}"/>
                                                    </td>
                                                    <td style="word-wrap: break-word;">
                                                        <lightning:formattedDateTime  value="{!ac.Accident_Date__c}" year="numeric" month="numeric" day="numeric"  hour="2-digit" minute="2-digit" hour12="true"/>
                                                    </td>
                                                    
                                                </tr>
                                            </aura:iteration>
                                        </tbody>
                                    </table>
                                    <aura:if isTrue="{!empty(v.accidentsList)}">
                                        <div style="margin: 39px;" class="slds-align_absolute-center">You don't have any vehicle accidents.</div>
                                    </aura:if>
                                    <aura:if isTrue="{!empty(v.accidentsFilterList) &amp;&amp; !empty(v.accidentsList)}">
                                        <div style="margin: 39px;" class="slds-align_absolute-center">We don't have any vehicle accidents with search keyword.</div>
                                    </aura:if>
                                </div> 
                            </div>
                        </div>
                    </div>
                </div>
            </aura:if>
        </div>
        <!--/aura:if-->
        
        
        <div aura:id="cmpBody">
            {!v.body}
        </div>
        <!-- <aura:if isTrue="{!v.showRecordDetailModal}">
            <c:BusinessCommunityRecordDetailPopup showIFrame="{!v.showRecordDetailModal}"
                                                  recordDetailId="{!v.recordDetailId}"
                                                  recordTypeName="{!v.recordTypeName}"/> 
   
        </aura:if> -->
    </div>
    <aura:if isTrue="{!v.more}">  
        <!--###### MODAL BOX Start######--> 
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open slds-modal_small more_action_popup">
            <div class="slds-modal__container">
                
                <!-- ###### MODAL BOX HEADER Start ######-->
                <header class="slds-modal__header ">
                    <!--<lightning:buttonIcon iconName="utility:close"
                                          onclick="{!c.closeModel}"
                                          alternativeText="close"
                                          variant="bare-inverse"
                                          class="slds-modal__close"/>-->
                    <div class="heading_btn">
                        <lightning:button variant="brand" 
                                          aura:id="addReq"
                                          label="Add"
                                          value="Add"
                                          title="Close" 
                                          class="activeTabClass"
                                          onclick="{!c.openAddMoreWindow}"/>
                        
                        <lightning:button variant="brand" 
                                          aura:id="offHire"
                                          label="Off-Hire"
                                          value="Off-Hire"
                                          title="Close" 
                                          onclick="{!c.openOffHireWindow}"/>
                        <lightning:button variant="brand" 
                                          aura:id="holdButton"
                                          label="Hold"
                                          value="Hold"
                                          title="Close" 
                                          onclick="{!c.openHoldRequestController}"/>
                        <lightning:button variant="brand" 
                                          aura:id="TerminateReq"
                                          label="Terminate"
                                          value="Terminate"
                                          title="Close" 
                                          onclick="{!c.openTerminateRequestController}"/>
                        
                    </div>
                </header>
                <div class="slds-modal__content slds-p-around--medium">
                    
                    <div class="popup_content outer-div">
                        <aura:if isTrue="{!v.showSpinner}">   
                            
                            <lightning:spinner aura:id="Spinner" variant="brand" class="spinner2" />
                        </aura:if> 
                        
                        <aura:if isTrue="{!v.terminateRequest}">    
                            <lightning:input type="Date" name="When do you need?" label="Effective Date" 
                                             disabled="false" format="YYYY-MM-DD" 
                                             aura:id="form2" required="true" 
                                             value="{!v.caseRecord.Preferred_Date__c}"
                                             autocomplete="off"   min="{!v.today}"
                                             class="slds-input__icon--left slds-input__icon--right" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/>
                            
                            <lightning:input type="textarea" name="comments" label="Tell us more.." 
                                             disabled="false"  
                                             aura:id="form2" required="true" 
                                             value="{!v.caseRecord.Description}"
                                             autocomplete="off"   min="1"
                                             class="slds-input__icon--left slds-input__icon--right" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/>  
                            
                            <lightning:input type="Text" name="subject" label="Subject" 
                                             disabled="false"  
                                             aura:id="form2" required="true" 
                                             value="{!v.caseRecord.Subject}"
                                             autocomplete="off"  min="1"
                                             class="slds-input__icon--left slds-input__icon--right" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/>
                            <lightning:input aura:id="file-input" type="file"
                                             files="{!v.fileToBeUploaded}"
                                             onchange="{!c.onFileUploaded}"
                                             label="Attachment"
                                             name="file" multiple="false"/>
                            
                            <div class="uploadimgs_div">
                                <ul>
                                    <aura:iteration items="{!v.uploadedFileList}" var="img"  indexVar="index">
                                        
                                        <li style="color:black">{!img.strFileName}&nbsp;
                                            <a href="javascript:void(0)" data-filename="{!img.strFileName}" data-index="{!index}" onclick="{!c.removeImg}">
                                                <lightning:button label="Remove" iconName="utility:delete" class="deletebtn"/>
                                            </a>
                                        </li> 
                                    </aura:iteration> 
                                </ul>
                            </div> 
                        </aura:if>
                        
                        <!-- hold-->
                        <aura:if isTrue="{!v.hold}">    
                            <lightning:input type="Date" name="When do you need?" label="Effective Date" 
                                             disabled="false" format="YYYY-MM-DD" 
                                             aura:id="form4" required="true" 
                                             value="{!v.caseRecord.Preferred_Date__c}"
                                             autocomplete="off"   min="{!v.today}"
                                             class="slds-input__icon--left slds-input__icon--right" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/>
                            
                            <lightning:input type="textarea" name="comments" label="Tell us more.." 
                                             disabled="false"  
                                             aura:id="form4" required="true" 
                                             value="{!v.caseRecord.Description}"
                                             autocomplete="off"   min="1"
                                             class="slds-input__icon--left slds-input__icon--right" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/>  
                            
                            <lightning:input type="Text" name="subject" label="Subject" 
                                             disabled="false"  
                                             aura:id="form4" required="true" 
                                             value="{!v.caseRecord.Subject}"
                                             autocomplete="off"  min="1"
                                             class="slds-input__icon--left slds-input__icon--right" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/>
                            <lightning:input aura:id="file-input" type="file"
                                             files="{!v.fileToBeUploaded}"
                                             onchange="{!c.onFileUploaded}"
                                             label="Attachment"
                                             name="file" multiple="false"/>
                            
                            <div class="uploadimgs_div">
                                <ul>
                                    <aura:iteration items="{!v.uploadedFileList}" var="img"  indexVar="index">
                                        
                                        <li style="color:black">{!img.strFileName}&nbsp;
                                            <a href="javascript:void(0)" data-filename="{!img.strFileName}" data-index="{!index}" onclick="{!c.removeImg}">
                                                <lightning:button label="Remove" iconName="utility:delete" class="deletebtn"/>
                                            </a>
                                        </li> 
                                    </aura:iteration> 
                                </ul>
                            </div> 
                        </aura:if>
                        <aura:if isTrue="{!v.addMore}">    
                            <lightning:input type="Date" name="When do you need?" label="Effective From" 
                                             disabled="false" format="YYYY-MM-DD" 
                                             aura:id="form1" required="true" 
                                             value="{!v.opp.Effective_From__c}"
                                             onchange="{! c.handleDateChange }"
                                             autocomplete="off"   min="{!v.today}"
                                             class="slds-input__icon--left slds-input__icon--right" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/>
                            <lightning:input type="Date" name="When do you need?" label="Effective To" 
                                             disabled="false" format="YYYY-MM-DD" 
                                             aura:id="form1" required="true" 
                                             value="{!v.opp.Effective_To__c}"
                                             onchange="{! c.handleDateChange }"
                                             autocomplete="off"   min="{!v.opp.Effective_From__c}"
                                             class="slds-input__icon--left slds-input__icon--right" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/>
                            
                            
                            <!--<p style="text-align: center; color: green;font-size: 18px;">{!v.opp.API_Service_Name__c} </p>
                          -->  
                            <lightning:input type="string" name="How many vehicles?" label="How many vehicles?" 
                                             disabled="false"  
                                             aura:id="form1" required="true" 
                                             value="{!v.opp.No_of_Vehicle__c}"
                                             autocomplete="off"   min="1"
                                             class="slds-input__icon--left slds-input__icon--right" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/>   
                            <lightning:input type="string" name="How many Resources?" label="How many Resources?" 
                                             disabled="false"  
                                             aura:id="form1" required="true" 
                                             value="{!v.opp.No_of_Resources__c}"
                                             autocomplete="off"   min="1"
                                             class="slds-input__icon--left slds-input__icon--right" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/>   
                            <lightning:input type="textarea" name="comments" label="Tell us more.." 
                                             disabled="false"  
                                             aura:id="form1" required="true" 
                                             value="{!v.opp.Description}"
                                             autocomplete="off"   min="1"
                                             class="slds-input__icon--left slds-input__icon--right" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/>  
                            
                            <!--lightning:input type="Text" name="subject" label="Subject" 
                                             disabled="false"  
                                             aura:id="form1" required="true" 
                                             value="{!v.caseRecord.Subject}"
                                             autocomplete="off"  min="1"
                                             class="" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/-->
                            
                            <lightning:input aura:id="file-input" type="file"
                                             files="{!v.fileToBeUploaded}"
                                             onchange="{!c.onFileUploaded}"
                                             label="Attachment"
                                             name="file" multiple="false"/>
                            
                            <div class="uploadimgs_div">
                                <ul>
                                    <aura:iteration items="{!v.uploadedFileList}" var="img"  indexVar="index">
                                        
                                        <li style="color:black">{!img.strFileName}&nbsp;
                                            <a href="javascript:void(0)" data-filename="{!img.strFileName}" data-index="{!index}" onclick="{!c.removeImg}">
                                                <lightning:button label="Remove" iconName="utility:delete" class="deletebtn"/>
                                            </a>
                                        </li> 
                                    </aura:iteration> 
                                </ul>
                            </div> 
                        </aura:if>
                        <!-- Off hire -->
                        <aura:if isTrue="{!v.offHire}">    
                            <lightning:input type="Date" name="When do you need?" label="Effective From" 
                                             disabled="false" format="YYYY-MM-DD" 
                                             aura:id="form3" required="true" 
                                             value="{!v.caseRecord.Preferred_Date__c}"
                                             autocomplete="off"   min="{!v.today}"
                                             class="slds-input__icon--left slds-input__icon--right" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/>
                            <lightning:input type="Date" name="When do you need?" label="Effective To" 
                                             disabled="false" format="YYYY-MM-DD" 
                                             aura:id="form3" required="true" 
                                             value="{!v.caseRecord.Preferred_End_Date__c}"
                                             autocomplete="off"   min="{!v.caseRecord.Preferred_Date__c}"
                                             class="slds-input__icon--left slds-input__icon--right" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/>
                            <lightning:input type="string" name="How many vehicles?" label="How many vehicles?" 
                                             disabled="false"  
                                             aura:id="form3" required="true" 
                                             value="{!v.caseRecord.No_of_Vehicle__c}"
                                             autocomplete="off"   min="1"
                                             class="slds-input__icon--left slds-input__icon--right" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/> 
                            
                            
                            <lightning:input type="string" name="How many Resources?" label="How many Resources?" 
                                             disabled="false"  
                                             aura:id="form3" required="true" 
                                             value="{!v.caseRecord.No_Of_Resources__c}"
                                             autocomplete="off"   min="1"
                                             class="slds-input__icon--left slds-input__icon--right" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/>   
                            <lightning:input type="textarea" name="comments" label="Tell us more.." 
                                             disabled="false"  
                                             aura:id="form3" required="true" 
                                             value="{!v.caseRecord.Description}"
                                             autocomplete="off"   min="1"
                                             class="slds-input__icon--left slds-input__icon--right" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/>  
                            <lightning:input type="Text" name="subject" label="Subject" 
                                             disabled="false"  
                                             aura:id="form3" required="true" 
                                             value="{!v.caseRecord.Subject}"
                                             autocomplete="off"  min="1"
                                             class="slds-input__icon--left slds-input__icon--right" 
                                             messageWhenValueMissing="{!v.clCompletethisfield}"/>
                            
                            <lightning:input aura:id="file-input" type="file"
                                             files="{!v.fileToBeUploaded}"
                                             onchange="{!c.onFileUploaded}"
                                             label="Attachment"
                                             name="file" multiple="false"/>
                            
                            <div class="uploadimgs_div">
                                <ul>
                                    <aura:iteration items="{!v.uploadedFileList}" var="img"  indexVar="index">
                                        
                                        <li style="color:black">{!img.strFileName}&nbsp;
                                            <a href="javascript:void(0)" data-filename="{!img.strFileName}" data-index="{!index}" onclick="{!c.removeImg}">
                                                <lightning:button label="Remove" iconName="utility:delete" class="deletebtn"/>
                                            </a>
                                        </li> 
                                    </aura:iteration> 
                                </ul>
                            </div> 
                            
                        </aura:if>
                    </div>
                </div>
                <footer class="slds-modal__footer">
                    <div>
                        
                        <lightning:button variant="brand" 
                                          label="Close"
                                          title="Close" 
                                          onclick="{!c.closeModel}" class="btn_close" disabled="{!v.showSpinner}"/>
                        <aura:if isTrue="{!v.addMore}">      
                            <lightning:button variant="brand" 
                                              label="Proceed"
                                              title="Close" 
                                              onclick="{!c.saveOpp}" class="btn_save" disabled="{!v.showSpinner}"/>
                        </aura:if>
                        <aura:if isTrue="{!v.offHire}">    
                            <lightning:button variant="brand" 
                                              label="Proceed"
                                              title="Close" 
                                              onclick="{!c.offHireRequestController}" class="btn_save" disabled="{!v.showSpinner}"/>
                        </aura:if>
                        <aura:if isTrue="{!v.terminateRequest}">    
                            <lightning:button variant="brand" 
                                              label="Proceed"
                                              title="Close" 
                                              onclick="{!c.terminateRequestController}" class="btn_save" disabled="{!v.showSpinner}"/>
                        </aura:if>
                        <aura:if isTrue="{!v.hold}">    
                            <lightning:button variant="brand" 
                                              label="Proceed"
                                              title="Close" 
                                              onclick="{!c.holdRequestController}" class="btn_save" disabled="{!v.showSpinner}"/>
                        </aura:if>
                    </div>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div> 
    </aura:if>
    <div class="footer_section">
        <div class="social_links">
            <a href="https://www.instagram.com/emiratestrans/" target="_blank"><img src="{!$Resource.ET_instagramimg}"  class=""/></a>
            <a href="https://twitter.com/emiratestrans" target="_blank"><img src="{!$Resource.ET_twitterimg}" class=""/></a>
            <a href="https://www.facebook.com/EmiratesTrans/" target="_blank"><img src="{!$Resource.ET_facebookimg}" class=""/></a>
            <a href="https://www.linkedin.com/in/emirates-transport-9b0673103" target="_blank"><img src="{!$Resource.ET_linkedinimg}"  class=""/></a>
        </div>
        <div class="copytext">© {!v.currentYear} Emirates Transport</div>
    </div>
    <!-- Added this code to show Custom detail page component -->
    <aura:if isTrue="{!v.showDetailCmp}">
        <div id="customCmpBusiness">
            <c:ET_CustomDetailPageForBusiness showDetailCmp="{!v.showDetailCmp}" recordId="{!v.recordDetailId}" 
                                              objectApiName="{!v.objectApiName}" ObjectName="{!v.ObjectName}"
                                              recordName="{!v.recordName}"
                                              fieldApiName1="{!v.fieldApiName1}" fieldApiName2="{!v.fieldApiName2}"
                                              fieldApiName3="{!v.fieldApiName3}" fieldApiName4="{!v.fieldApiName4}"
                                              field1Label="{!v.field1Label}" field2Label="{!v.field2Label}"
                                              field3Label="{!v.field3Label}" field4Label="{!v.field4Label}"/>
        </div>
        
    </aura:if>
    
    <aura:if isTrue="{!v.showNewSerReqPopup}">
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open slds-modal_small">
            <div class="slds-modal__container animated slideInUp">
                <!-- ###### MODAL BOX HEADER Start ######-->
                <header class="slds-modal__header">
                    
                    <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Create Service Request </h2>
                    
                </header>
                <!--###### MODAL BOX BODY Part Start######-->
                <div class="slds-modal__content " id="modal-content-id-1">
                    <div class="slds-modal__body" aura:id='mainDiv'>
                        <lightning:recordEditForm objectApiName="Fleet_Service_Request__c" aura:id="fleetdata" 
                                                  
                                                  onsubmit="{!c.handleOnSubmit}" 
                                                  onsuccess="{!c.handleOnSuccess}" 
                                                  onerror="{!c.handleOnError}">
                            
                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                <div class="slds-grid slds-gutters">
                              

                                    <div class="slds-col slds-size_1-of-2">
                                        <div class="slds-form-element slds-is-editing">
                                            <div class="slds-form-element__control">
                                                <lightning:inputField  variant="label-hidden" class="slds-hide" fieldName="Customer_Vehicle__c" value="{!v.selectedVehicleId}"/>
                                                <lightning:inputField  variant="label-hidden" class="slds-hide" fieldName="Account__c" value="{!v.currentaccountId}" />
                                                <c:B2B_customerVehicleCustomLkup custmPlaceholder="Search Internal No..." accId="{!v.currentaccountId}" Label="Internal No" disable="false" selectRecordId="{!v.selectedVehicleId}" selectRecordName="{!v.selectedVehicleName}"/>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="slds-col slds-size_1-of-2">
                                        <div class="slds-form-element slds-is-editing">
                                            <div class="slds-form-element__control">

                                                <span style="color:#000;">Workshop Location</span><B/>
                                                <lightning:inputField variant="label-hidden"  fieldName="Workshop_Location__c" class="leftspace" value="{!v.defaultWorkStation}" />
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="slds-grid slds-gutters">
                                    <div class="slds-col slds-size_1-of-2">
                                        <div class="slds-form-element slds-is-editing">
                                            <div class="slds-form-element__control">
                                                <span style="color:#000;">Odometer Km</span><B/>
                                                <lightning:inputField variant="label-hidden" fieldName="Odometer_Km__c" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="slds-col slds-size_1-of-2">
                                        <div class="slds-form-element slds-is-editing">
                                            <div class="slds-form-element__control">
                                                <span style="color:#000;">Description</span><B/>
                                                <lightning:inputField variant="label-hidden" class="textarea_desc" fieldName="Description__c" value="" />
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                       
                        <footer class="slds-modal__footer">
                            <!--<lightning:button variant="neutral" 
                                      label="Create"
                                      title="Create"
                                      type="submit"
                                      aura:id="submit"
                                      onclick=""  class="btncancel"/>-->
                            <lightning:button variant="neutral" 
                                              label="Cancel"
                                              title="Close"
                                              onclick="{!c.closeServiceReq }" class="btncancel"/>
                            
                            <lightning:button aura:id="submit" class="btnSubmit" variant="brand" type="submit" name="Save" label="Create" disabled="{!v.disableSerReqSavebtn}"/>
                            
                        </footer>
                        
                    </lightning:recordEditForm>
                   
                </div>
            </div>   
            
            
        </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
</aura:if>

</aura:component>